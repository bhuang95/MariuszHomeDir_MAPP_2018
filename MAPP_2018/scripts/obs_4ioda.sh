#!/bin/ksh

#to add  benchmark for luts
#1001   FORMAT(100(f9.7,a2))
#       WRITE(120,1001)(hofx(1,i),'f,',i=1,100)


. /etc/profile

. ~/mapp_2018/.environ.ksh

infile=/scratch1/BMC/gsd-fv3-dev/MAPP_2018/pagowski/jedi/data/aod_obs_2018041500_m.nc4

#gocart_1g
#ncap2 -O -s 'aerosol_optical_depth_4_HofX[$nlocs]={0.0496961f,0.0623834f,0.0675642f,0.0340378f,0.0978320f,0.0402397f,0.1024753f,0.0842726f,0.0243608f,0.0162571f,0.0272135f,0.0382125f,0.1205003f,0.0886752f,0.0384483f,0.0457119f,0.0129080f,0.0302637f,0.0344277f,0.0438181f,0.0764797f,0.1009627f,0.0638018f,0.0462148f,0.0390395f,0.1320064f,0.0326053f,0.0678846f,0.0387232f,0.0479997f,0.0242373f,0.0553519f,0.0436621f,0.0373940f,0.0301775f,0.0419334f,0.0349856f,0.0680983f,0.0426740f,0.0467878f,0.0285842f,0.0421275f,0.0227087f,0.0736626f,0.0942067f,0.0391869f,0.0485930f,0.0891677f,0.0273627f,0.0858253f,0.0529465f,0.0431233f,0.0852780f,0.0479509f,0.0529914f,0.0362560f,0.0493865f,0.0269107f,0.0728933f,0.1080859f,0.0556639f,0.0137560f,0.0889723f,0.0144813f,0.0419940f,0.0121974f,0.0547842f,0.0668588f,0.0219839f,0.0442751f,0.0479680f,0.0357830f,0.0252116f,0.0443991f,0.0358373f,0.0802490f,0.0933655f,0.0361324f,0.0885556f,0.0679148f,0.0420869f,0.0309188f,0.0981404f,0.0738506f,0.0524103f,0.0466231f,0.0517539f,0.0427532f,0.0465810f,0.0408087f,0.0762824f,0.0648898f,0.0922174f,0.0611452f,0.0359984f,0.0280067f,0.0719738f,0.0651598f,0.0244410f,0.0407837f}' $infile tmp.nc

infile=/scratch1/BMC/gsd-fv3-dev/MAPP_2018/pagowski/jedi/data/aod_obs_2018041500_m_g1.nc4

#gocart_2g
ncap2 -O -s 'aerosol_optical_depth_4_HofX[$nlocs]={0.0502533f,0.0626176f,0.0678530f,0.0355700f,0.0980136f,0.0411406f,0.1137099f,0.0846736f,0.0263586f,0.0167262f,0.0277179f,0.0450118f,0.1207641f,0.0889001f,0.0386024f,0.0458729f,0.0150442f,0.0306609f,0.0346695f,0.0446559f,0.0769508f,0.1014598f,0.0640326f,0.0465967f,0.0394981f,0.1324539f,0.0377224f,0.0686569f,0.0389587f,0.0489497f,0.0277778f,0.0558209f,0.0438903f,0.0382360f,0.0303491f,0.0465493f,0.0354862f,0.0689943f,0.0452198f,0.0469812f,0.0289959f,0.0423061f,0.0246838f,0.0739323f,0.0945563f,0.0402025f,0.0487595f,0.0894354f,0.0309128f,0.0866965f,0.0531314f,0.0435629f,0.0855053f,0.0483989f,0.0532473f,0.0391291f,0.0512870f,0.0278228f,0.0817720f,0.1084269f,0.0559815f,0.0162933f,0.0892152f,0.0153280f,0.0423088f,0.0142180f,0.0553571f,0.0671275f,0.0239686f,0.0444569f,0.0483078f,0.0364494f,0.0258763f,0.0451005f,0.0362252f,0.0804570f,0.0938010f,0.0428480f,0.0887745f,0.0688280f,0.0498745f,0.0337554f,0.1104855f,0.0743747f,0.0526153f,0.0475858f,0.0524761f,0.0436097f,0.0467323f,0.0412367f,0.0765087f,0.0652332f,0.1021677f,0.0618201f,0.0388746f,0.0282010f,0.0724576f,0.0657132f,0.0258246f,0.0409376f}' $infile tmp.nc

ncrename -O -v aerosol_optical_depth_4_HofX,aerosol_optical_depth_4@HofX_2g tmp.nc

exit

infile=/scratch1/BMC/gsd-fv3-dev/MAPP_2018/pagowski/jedi/data/aod_obs_2018041500_s.nc4

outfile=/scratch1/BMC/gsd-fv3-dev/MAPP_2018/pagowski/jedi/data/aod_obs_2018041500_s_new.nc4

ncap2 -O -s 'aerosol_optical_depth_4_LutsHofx[$nlocs]={0.0748039f,0.0631678,0.0736935,0.0617702,0.0366688,0.0335289,0.0386151,0.0319214,0.0238578,0.0289287}' $infile tmp.nc

ncrename -O -v aerosol_optical_depth_4_LutsHofx,aerosol_optical_depth_4@LutsHofx tmp.nc

ncks -O -x -v modis_deep_blue_flag@MetaData tmp.nc $outfile

ncatted -O -a history,global,d,, $outfile
