+ startdate=2015080100
+ enddate=2015090100
+ prefix=LL4FV3
+ prefixnc=emiss_bburn_fv3
+ SRCDIR=/home/Mariusz.Pagowski/codes/src_fv3
+ INDIR=/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA
+ INDIR_modis=/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS
+ INDIR_wfabba=/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST
+ OUTDIR=/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ PREPEXEC=/scratch3/BMC/chem-var/pagowski/PREP-CHEM-SRC-1.5/bin/prep.x
+ RUNDIR=/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/workdir_fireemiss
+ cd /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/workdir_fireemiss
+ rm -f 'Global_MCD14DL_*.txt' 'f*.filt'
+ . /home/Mariusz.Pagowski/bin/funcs.sh
+ increment=24
+ current_date=2015080100
+ /bin/cp /home/Mariusz.Pagowski/codes/src_fv3/emiss_bburn_fv3.x /home/Mariusz.Pagowski/codes/src_fv3/prep_chem_sources.sh /scratch3/BMC/chem-var/pagowski/PREP-CHEM-SRC-1.5/bin/prep.x .
+ [[ 2015080100 -le 2015090100 ]]
+ echo 2015080100
+ cut -c1-4
+ year=2015
+ echo 2015080100
+ cut -c5-6
+ month=08
+ echo 2015080100
+ cut -c7-8
+ day=01
+ echo 2015080100
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/01' +%j
+ julday=2015213
+ echo 2015213
2015213
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=01, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=01, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080100.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080100 emiss_bburn_fv3
 LL4FV3-T-2015-08-01-000000-BC-bb.bin
 BC  0.0000000E+00   1.670144    
    
 LL4FV3-T-2015-08-01-000000-OC-bb.bin
 OC  0.0000000E+00   11.73004    
    
 LL4FV3-T-2015-08-01-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   4.541393    
    
 LL4FV3-T-2015-08-01-000000-PM10-bb.bin
 PM10  0.0000000E+00   31.01693    
    
 LL4FV3-T-2015-08-01-000000-SO2-bb.bin
 SO2  0.0000000E+00  6.1342446E-04
    
 LL4FV3-T-2015-08-01-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-01-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.8527222E-06
    
 LL4FV3-T-2015-08-01-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   456000.0    
    
 firesize_agef  0.0000000E+00   2087000.    
    
 firesize_agsv  0.0000000E+00   1436850.    
    
 firesize_aggr  0.0000000E+00   1055500.    
    
+ /bin/rm -f Global_MCD14DL_2015213.txt 'f2015213*.filt' LL4FV3-T-2015-08-01-000000-ALD-bb.bin LL4FV3-T-2015-08-01-000000-ASH-bb.bin LL4FV3-T-2015-08-01-000000-BC-bb.bin LL4FV3-T-2015-08-01-000000-CO-bb.bin LL4FV3-T-2015-08-01-000000-CSL-bb.bin LL4FV3-T-2015-08-01-000000-DMS-bb.bin LL4FV3-T-2015-08-01-000000-ETH-bb.bin LL4FV3-T-2015-08-01-000000-HC3-bb.bin LL4FV3-T-2015-08-01-000000-HC5-bb.bin LL4FV3-T-2015-08-01-000000-HC8-bb.bin LL4FV3-T-2015-08-01-000000-HCHO-bb.bin LL4FV3-T-2015-08-01-000000-ISO-bb.bin LL4FV3-T-2015-08-01-000000-KET-bb.bin LL4FV3-T-2015-08-01-000000-lonlat-bb.bin LL4FV3-T-2015-08-01-000000-NH3-bb.bin LL4FV3-T-2015-08-01-000000-NO2-bb.bin LL4FV3-T-2015-08-01-000000-NO-bb.bin LL4FV3-T-2015-08-01-000000-OC-bb.bin LL4FV3-T-2015-08-01-000000-OLI-bb.bin LL4FV3-T-2015-08-01-000000-OLT-bb.bin LL4FV3-T-2015-08-01-000000-ORA2-bb.bin LL4FV3-T-2015-08-01-000000-plume-bb.bin LL4FV3-T-2015-08-01-000000-PM10-bb.bin LL4FV3-T-2015-08-01-000000-PM2.5-bb.bin LL4FV3-T-2015-08-01-000000-SO2-bb.bin LL4FV3-T-2015-08-01-000000-SO4-bb.bin LL4FV3-T-2015-08-01-000000-TOL-bb.bin LL4FV3-T-2015-08-01-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080100.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 01 -H 00
+ indate='2015-08-01 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-01 00:00:00 -H 00 -H +24
+ outdate='2015-08-02 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-01 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-01 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-01 00:00:00 -H 00 -H +24
+ end_day=02
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-01 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080200
+ echo 2015080200
2015080200
+ [[ 2015080200 -le 2015090100 ]]
+ echo 2015080200
+ cut -c1-4
+ year=2015
+ echo 2015080200
+ cut -c5-6
+ month=08
+ echo 2015080200
+ cut -c7-8
+ day=02
+ echo 2015080200
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/02' +%j
+ julday=2015214
+ echo 2015214
2015214
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=02, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=02, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080200.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080200 emiss_bburn_fv3
 LL4FV3-T-2015-08-02-000000-BC-bb.bin
 BC  0.0000000E+00   2.703411    
    
 LL4FV3-T-2015-08-02-000000-OC-bb.bin
 OC  0.0000000E+00   18.91791    
    
 LL4FV3-T-2015-08-02-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   7.326731    
    
 LL4FV3-T-2015-08-02-000000-PM10-bb.bin
 PM10  0.0000000E+00   50.10981    
    
 LL4FV3-T-2015-08-02-000000-SO2-bb.bin
 SO2  0.0000000E+00  9.8962663E-04
    
 LL4FV3-T-2015-08-02-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-02-000000-DMS-bb.bin
 DMS  0.0000000E+00  3.0072545E-06
    
 LL4FV3-T-2015-08-02-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1140000.    
    
 firesize_agef  0.0000000E+00   1746600.    
    
 firesize_agsv  0.0000000E+00   1561950.    
    
 firesize_aggr  0.0000000E+00   1475200.    
    
+ /bin/rm -f Global_MCD14DL_2015214.txt 'f2015214*.filt' LL4FV3-T-2015-08-02-000000-ALD-bb.bin LL4FV3-T-2015-08-02-000000-ASH-bb.bin LL4FV3-T-2015-08-02-000000-BC-bb.bin LL4FV3-T-2015-08-02-000000-CO-bb.bin LL4FV3-T-2015-08-02-000000-CSL-bb.bin LL4FV3-T-2015-08-02-000000-DMS-bb.bin LL4FV3-T-2015-08-02-000000-ETH-bb.bin LL4FV3-T-2015-08-02-000000-HC3-bb.bin LL4FV3-T-2015-08-02-000000-HC5-bb.bin LL4FV3-T-2015-08-02-000000-HC8-bb.bin LL4FV3-T-2015-08-02-000000-HCHO-bb.bin LL4FV3-T-2015-08-02-000000-ISO-bb.bin LL4FV3-T-2015-08-02-000000-KET-bb.bin LL4FV3-T-2015-08-02-000000-lonlat-bb.bin LL4FV3-T-2015-08-02-000000-NH3-bb.bin LL4FV3-T-2015-08-02-000000-NO2-bb.bin LL4FV3-T-2015-08-02-000000-NO-bb.bin LL4FV3-T-2015-08-02-000000-OC-bb.bin LL4FV3-T-2015-08-02-000000-OLI-bb.bin LL4FV3-T-2015-08-02-000000-OLT-bb.bin LL4FV3-T-2015-08-02-000000-ORA2-bb.bin LL4FV3-T-2015-08-02-000000-plume-bb.bin LL4FV3-T-2015-08-02-000000-PM10-bb.bin LL4FV3-T-2015-08-02-000000-PM2.5-bb.bin LL4FV3-T-2015-08-02-000000-SO2-bb.bin LL4FV3-T-2015-08-02-000000-SO4-bb.bin LL4FV3-T-2015-08-02-000000-TOL-bb.bin LL4FV3-T-2015-08-02-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080200.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 02 -H 00
+ indate='2015-08-02 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-02 00:00:00 -H 00 -H +24
+ outdate='2015-08-03 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-02 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-02 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-02 00:00:00 -H 00 -H +24
+ end_day=03
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-02 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080300
+ echo 2015080300
2015080300
+ [[ 2015080300 -le 2015090100 ]]
+ echo 2015080300
+ cut -c1-4
+ year=2015
+ echo 2015080300
+ cut -c5-6
+ month=08
+ echo 2015080300
+ cut -c7-8
+ day=03
+ echo 2015080300
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/03' +%j
+ julday=2015215
+ echo 2015215
2015215
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=03, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=03, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080300.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080300 emiss_bburn_fv3
 LL4FV3-T-2015-08-03-000000-BC-bb.bin
 BC  0.0000000E+00   1.089617    
    
 LL4FV3-T-2015-08-03-000000-OC-bb.bin
 OC  0.0000000E+00   7.579942    
    
 LL4FV3-T-2015-08-03-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   2.937226    
    
 LL4FV3-T-2015-08-03-000000-PM10-bb.bin
 PM10  0.0000000E+00   20.13422    
    
 LL4FV3-T-2015-08-03-000000-SO2-bb.bin
 SO2  0.0000000E+00  3.9672191E-04
    
 LL4FV3-T-2015-08-03-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-03-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.2174901E-06
    
 LL4FV3-T-2015-08-03-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181831    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   816150.0    
    
 firesize_agsv  0.0000000E+00   1631640.    
    
 firesize_aggr  0.0000000E+00   1475200.    
    
+ /bin/rm -f Global_MCD14DL_2015215.txt 'f2015215*.filt' LL4FV3-T-2015-08-03-000000-ALD-bb.bin LL4FV3-T-2015-08-03-000000-ASH-bb.bin LL4FV3-T-2015-08-03-000000-BC-bb.bin LL4FV3-T-2015-08-03-000000-CO-bb.bin LL4FV3-T-2015-08-03-000000-CSL-bb.bin LL4FV3-T-2015-08-03-000000-DMS-bb.bin LL4FV3-T-2015-08-03-000000-ETH-bb.bin LL4FV3-T-2015-08-03-000000-HC3-bb.bin LL4FV3-T-2015-08-03-000000-HC5-bb.bin LL4FV3-T-2015-08-03-000000-HC8-bb.bin LL4FV3-T-2015-08-03-000000-HCHO-bb.bin LL4FV3-T-2015-08-03-000000-ISO-bb.bin LL4FV3-T-2015-08-03-000000-KET-bb.bin LL4FV3-T-2015-08-03-000000-lonlat-bb.bin LL4FV3-T-2015-08-03-000000-NH3-bb.bin LL4FV3-T-2015-08-03-000000-NO2-bb.bin LL4FV3-T-2015-08-03-000000-NO-bb.bin LL4FV3-T-2015-08-03-000000-OC-bb.bin LL4FV3-T-2015-08-03-000000-OLI-bb.bin LL4FV3-T-2015-08-03-000000-OLT-bb.bin LL4FV3-T-2015-08-03-000000-ORA2-bb.bin LL4FV3-T-2015-08-03-000000-plume-bb.bin LL4FV3-T-2015-08-03-000000-PM10-bb.bin LL4FV3-T-2015-08-03-000000-PM2.5-bb.bin LL4FV3-T-2015-08-03-000000-SO2-bb.bin LL4FV3-T-2015-08-03-000000-SO4-bb.bin LL4FV3-T-2015-08-03-000000-TOL-bb.bin LL4FV3-T-2015-08-03-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080300.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 03 -H 00
+ indate='2015-08-03 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-03 00:00:00 -H 00 -H +24
+ outdate='2015-08-04 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-03 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-03 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-03 00:00:00 -H 00 -H +24
+ end_day=04
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-03 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080400
+ echo 2015080400
2015080400
+ [[ 2015080400 -le 2015090100 ]]
+ echo 2015080400
+ cut -c1-4
+ year=2015
+ echo 2015080400
+ cut -c5-6
+ month=08
+ echo 2015080400
+ cut -c7-8
+ day=04
+ echo 2015080400
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/04' +%j
+ julday=2015216
+ echo 2015216
2015216
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=04, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=04, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080400.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080400 emiss_bburn_fv3
 LL4FV3-T-2015-08-04-000000-BC-bb.bin
 BC  0.0000000E+00   4.018047    
    
 LL4FV3-T-2015-08-04-000000-OC-bb.bin
 OC  0.0000000E+00   27.95167    
    
 LL4FV3-T-2015-08-04-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   10.83129    
    
 LL4FV3-T-2015-08-04-000000-PM10-bb.bin
 PM10  0.0000000E+00   74.24673    
    
 LL4FV3-T-2015-08-04-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.4629446E-03
    
 LL4FV3-T-2015-08-04-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-04-000000-DMS-bb.bin
 DMS  0.0000000E+00  4.4895928E-06
    
 LL4FV3-T-2015-08-04-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181831    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   912000.0    
    
 firesize_agef  0.0000000E+00   684000.0    
    
 firesize_agsv  0.0000000E+00   1596000.    
    
 firesize_aggr  0.0000000E+00   889000.0    
    
+ /bin/rm -f Global_MCD14DL_2015216.txt 'f2015216*.filt' LL4FV3-T-2015-08-04-000000-ALD-bb.bin LL4FV3-T-2015-08-04-000000-ASH-bb.bin LL4FV3-T-2015-08-04-000000-BC-bb.bin LL4FV3-T-2015-08-04-000000-CO-bb.bin LL4FV3-T-2015-08-04-000000-CSL-bb.bin LL4FV3-T-2015-08-04-000000-DMS-bb.bin LL4FV3-T-2015-08-04-000000-ETH-bb.bin LL4FV3-T-2015-08-04-000000-HC3-bb.bin LL4FV3-T-2015-08-04-000000-HC5-bb.bin LL4FV3-T-2015-08-04-000000-HC8-bb.bin LL4FV3-T-2015-08-04-000000-HCHO-bb.bin LL4FV3-T-2015-08-04-000000-ISO-bb.bin LL4FV3-T-2015-08-04-000000-KET-bb.bin LL4FV3-T-2015-08-04-000000-lonlat-bb.bin LL4FV3-T-2015-08-04-000000-NH3-bb.bin LL4FV3-T-2015-08-04-000000-NO2-bb.bin LL4FV3-T-2015-08-04-000000-NO-bb.bin LL4FV3-T-2015-08-04-000000-OC-bb.bin LL4FV3-T-2015-08-04-000000-OLI-bb.bin LL4FV3-T-2015-08-04-000000-OLT-bb.bin LL4FV3-T-2015-08-04-000000-ORA2-bb.bin LL4FV3-T-2015-08-04-000000-plume-bb.bin LL4FV3-T-2015-08-04-000000-PM10-bb.bin LL4FV3-T-2015-08-04-000000-PM2.5-bb.bin LL4FV3-T-2015-08-04-000000-SO2-bb.bin LL4FV3-T-2015-08-04-000000-SO4-bb.bin LL4FV3-T-2015-08-04-000000-TOL-bb.bin LL4FV3-T-2015-08-04-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080400.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 04 -H 00
+ indate='2015-08-04 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-04 00:00:00 -H 00 -H +24
+ outdate='2015-08-05 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-04 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-04 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-04 00:00:00 -H 00 -H +24
+ end_day=05
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-04 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080500
+ echo 2015080500
2015080500
+ [[ 2015080500 -le 2015090100 ]]
+ echo 2015080500
+ cut -c1-4
+ year=2015
+ echo 2015080500
+ cut -c5-6
+ month=08
+ echo 2015080500
+ cut -c7-8
+ day=05
+ echo 2015080500
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/05' +%j
+ julday=2015217
+ echo 2015217
2015217
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=05, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=05, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080500.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080500 emiss_bburn_fv3
 LL4FV3-T-2015-08-05-000000-BC-bb.bin
 BC  0.0000000E+00   4.271105    
    
 LL4FV3-T-2015-08-05-000000-OC-bb.bin
 OC  0.0000000E+00   29.71204    
    
 LL4FV3-T-2015-08-05-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   11.51339    
    
 LL4FV3-T-2015-08-05-000000-PM10-bb.bin
 PM10  0.0000000E+00   78.92251    
    
 LL4FV3-T-2015-08-05-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.5550767E-03
    
 LL4FV3-T-2015-08-05-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-05-000000-DMS-bb.bin
 DMS  0.0000000E+00  4.7723374E-06
    
 LL4FV3-T-2015-08-05-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181831    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   739400.0    
    
 firesize_agef  0.0000000E+00   749198.1    
    
 firesize_agsv  0.0000000E+00   1538300.    
    
 firesize_aggr  0.0000000E+00   2017785.    
    
+ /bin/rm -f Global_MCD14DL_2015217.txt 'f2015217*.filt' LL4FV3-T-2015-08-05-000000-ALD-bb.bin LL4FV3-T-2015-08-05-000000-ASH-bb.bin LL4FV3-T-2015-08-05-000000-BC-bb.bin LL4FV3-T-2015-08-05-000000-CO-bb.bin LL4FV3-T-2015-08-05-000000-CSL-bb.bin LL4FV3-T-2015-08-05-000000-DMS-bb.bin LL4FV3-T-2015-08-05-000000-ETH-bb.bin LL4FV3-T-2015-08-05-000000-HC3-bb.bin LL4FV3-T-2015-08-05-000000-HC5-bb.bin LL4FV3-T-2015-08-05-000000-HC8-bb.bin LL4FV3-T-2015-08-05-000000-HCHO-bb.bin LL4FV3-T-2015-08-05-000000-ISO-bb.bin LL4FV3-T-2015-08-05-000000-KET-bb.bin LL4FV3-T-2015-08-05-000000-lonlat-bb.bin LL4FV3-T-2015-08-05-000000-NH3-bb.bin LL4FV3-T-2015-08-05-000000-NO2-bb.bin LL4FV3-T-2015-08-05-000000-NO-bb.bin LL4FV3-T-2015-08-05-000000-OC-bb.bin LL4FV3-T-2015-08-05-000000-OLI-bb.bin LL4FV3-T-2015-08-05-000000-OLT-bb.bin LL4FV3-T-2015-08-05-000000-ORA2-bb.bin LL4FV3-T-2015-08-05-000000-plume-bb.bin LL4FV3-T-2015-08-05-000000-PM10-bb.bin LL4FV3-T-2015-08-05-000000-PM2.5-bb.bin LL4FV3-T-2015-08-05-000000-SO2-bb.bin LL4FV3-T-2015-08-05-000000-SO4-bb.bin LL4FV3-T-2015-08-05-000000-TOL-bb.bin LL4FV3-T-2015-08-05-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080500.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 05 -H 00
+ indate='2015-08-05 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-05 00:00:00 -H 00 -H +24
+ outdate='2015-08-06 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-05 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-05 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-05 00:00:00 -H 00 -H +24
+ end_day=06
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-05 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080600
+ echo 2015080600
2015080600
+ [[ 2015080600 -le 2015090100 ]]
+ echo 2015080600
+ cut -c1-4
+ year=2015
+ echo 2015080600
+ cut -c5-6
+ month=08
+ echo 2015080600
+ cut -c7-8
+ day=06
+ echo 2015080600
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/06' +%j
+ julday=2015218
+ echo 2015218
2015218
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=06, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=06, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080600.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080600 emiss_bburn_fv3
 LL4FV3-T-2015-08-06-000000-BC-bb.bin
 BC  0.0000000E+00  0.6474643    
    
 LL4FV3-T-2015-08-06-000000-OC-bb.bin
 OC  0.0000000E+00   4.936930    
    
 LL4FV3-T-2015-08-06-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   1.895234    
    
 LL4FV3-T-2015-08-06-000000-PM10-bb.bin
 PM10  0.0000000E+00   12.48458    
    
 LL4FV3-T-2015-08-06-000000-SO2-bb.bin
 SO2  0.0000000E+00  2.5612951E-04
    
 LL4FV3-T-2015-08-06-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-06-000000-DMS-bb.bin
 DMS  0.0000000E+00  7.2344841E-07
    
 LL4FV3-T-2015-08-06-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   647821.7    
    
 firesize_agef  0.0000000E+00   1164430.    
    
 firesize_agsv  0.0000000E+00   1824000.    
    
 firesize_aggr  0.0000000E+00   1022400.    
    
+ /bin/rm -f Global_MCD14DL_2015218.txt 'f2015218*.filt' LL4FV3-T-2015-08-06-000000-ALD-bb.bin LL4FV3-T-2015-08-06-000000-ASH-bb.bin LL4FV3-T-2015-08-06-000000-BC-bb.bin LL4FV3-T-2015-08-06-000000-CO-bb.bin LL4FV3-T-2015-08-06-000000-CSL-bb.bin LL4FV3-T-2015-08-06-000000-DMS-bb.bin LL4FV3-T-2015-08-06-000000-ETH-bb.bin LL4FV3-T-2015-08-06-000000-HC3-bb.bin LL4FV3-T-2015-08-06-000000-HC5-bb.bin LL4FV3-T-2015-08-06-000000-HC8-bb.bin LL4FV3-T-2015-08-06-000000-HCHO-bb.bin LL4FV3-T-2015-08-06-000000-ISO-bb.bin LL4FV3-T-2015-08-06-000000-KET-bb.bin LL4FV3-T-2015-08-06-000000-lonlat-bb.bin LL4FV3-T-2015-08-06-000000-NH3-bb.bin LL4FV3-T-2015-08-06-000000-NO2-bb.bin LL4FV3-T-2015-08-06-000000-NO-bb.bin LL4FV3-T-2015-08-06-000000-OC-bb.bin LL4FV3-T-2015-08-06-000000-OLI-bb.bin LL4FV3-T-2015-08-06-000000-OLT-bb.bin LL4FV3-T-2015-08-06-000000-ORA2-bb.bin LL4FV3-T-2015-08-06-000000-plume-bb.bin LL4FV3-T-2015-08-06-000000-PM10-bb.bin LL4FV3-T-2015-08-06-000000-PM2.5-bb.bin LL4FV3-T-2015-08-06-000000-SO2-bb.bin LL4FV3-T-2015-08-06-000000-SO4-bb.bin LL4FV3-T-2015-08-06-000000-TOL-bb.bin LL4FV3-T-2015-08-06-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080600.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 06 -H 00
+ indate='2015-08-06 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-06 00:00:00 -H 00 -H +24
+ outdate='2015-08-07 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-06 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-06 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-06 00:00:00 -H 00 -H +24
+ end_day=07
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-06 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080700
+ echo 2015080700
2015080700
+ [[ 2015080700 -le 2015090100 ]]
+ echo 2015080700
+ cut -c1-4
+ year=2015
+ echo 2015080700
+ cut -c5-6
+ month=08
+ echo 2015080700
+ cut -c7-8
+ day=07
+ echo 2015080700
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/07' +%j
+ julday=2015219
+ echo 2015219
2015219
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=07, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=07, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080700.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080700 emiss_bburn_fv3
 LL4FV3-T-2015-08-07-000000-BC-bb.bin
 BC  0.0000000E+00  0.6608864    
    
 LL4FV3-T-2015-08-07-000000-OC-bb.bin
 OC  0.0000000E+00   5.736598    
    
 LL4FV3-T-2015-08-07-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   2.162215    
    
 LL4FV3-T-2015-08-07-000000-PM10-bb.bin
 PM10  0.0000000E+00   12.37212    
    
 LL4FV3-T-2015-08-07-000000-SO2-bb.bin
 SO2  0.0000000E+00  2.9001708E-04
    
 LL4FV3-T-2015-08-07-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-07-000000-DMS-bb.bin
 DMS  0.0000000E+00  7.3844558E-07
    
 LL4FV3-T-2015-08-07-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181831    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   912000.0    
    
 firesize_agef  0.0000000E+00   1520000.    
    
 firesize_agsv  0.0000000E+00   2052000.    
    
 firesize_aggr  0.0000000E+00   1557700.    
    
+ /bin/rm -f Global_MCD14DL_2015219.txt 'f2015219*.filt' LL4FV3-T-2015-08-07-000000-ALD-bb.bin LL4FV3-T-2015-08-07-000000-ASH-bb.bin LL4FV3-T-2015-08-07-000000-BC-bb.bin LL4FV3-T-2015-08-07-000000-CO-bb.bin LL4FV3-T-2015-08-07-000000-CSL-bb.bin LL4FV3-T-2015-08-07-000000-DMS-bb.bin LL4FV3-T-2015-08-07-000000-ETH-bb.bin LL4FV3-T-2015-08-07-000000-HC3-bb.bin LL4FV3-T-2015-08-07-000000-HC5-bb.bin LL4FV3-T-2015-08-07-000000-HC8-bb.bin LL4FV3-T-2015-08-07-000000-HCHO-bb.bin LL4FV3-T-2015-08-07-000000-ISO-bb.bin LL4FV3-T-2015-08-07-000000-KET-bb.bin LL4FV3-T-2015-08-07-000000-lonlat-bb.bin LL4FV3-T-2015-08-07-000000-NH3-bb.bin LL4FV3-T-2015-08-07-000000-NO2-bb.bin LL4FV3-T-2015-08-07-000000-NO-bb.bin LL4FV3-T-2015-08-07-000000-OC-bb.bin LL4FV3-T-2015-08-07-000000-OLI-bb.bin LL4FV3-T-2015-08-07-000000-OLT-bb.bin LL4FV3-T-2015-08-07-000000-ORA2-bb.bin LL4FV3-T-2015-08-07-000000-plume-bb.bin LL4FV3-T-2015-08-07-000000-PM10-bb.bin LL4FV3-T-2015-08-07-000000-PM2.5-bb.bin LL4FV3-T-2015-08-07-000000-SO2-bb.bin LL4FV3-T-2015-08-07-000000-SO4-bb.bin LL4FV3-T-2015-08-07-000000-TOL-bb.bin LL4FV3-T-2015-08-07-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080700.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 07 -H 00
+ indate='2015-08-07 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-07 00:00:00 -H 00 -H +24
+ outdate='2015-08-08 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-07 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-07 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-07 00:00:00 -H 00 -H +24
+ end_day=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-07 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080800
+ echo 2015080800
2015080800
+ [[ 2015080800 -le 2015090100 ]]
+ echo 2015080800
+ cut -c1-4
+ year=2015
+ echo 2015080800
+ cut -c5-6
+ month=08
+ echo 2015080800
+ cut -c7-8
+ day=08
+ echo 2015080800
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/08' +%j
+ julday=2015220
+ echo 2015220
2015220
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=08, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=08, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080800.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080800 emiss_bburn_fv3
 LL4FV3-T-2015-08-08-000000-BC-bb.bin
 BC  0.0000000E+00  0.9369387    
    
 LL4FV3-T-2015-08-08-000000-OC-bb.bin
 OC  0.0000000E+00   11.46400    
    
 LL4FV3-T-2015-08-08-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   4.265275    
    
 LL4FV3-T-2015-08-08-000000-PM10-bb.bin
 PM10  0.0000000E+00   24.20540    
    
 LL4FV3-T-2015-08-08-000000-SO2-bb.bin
 SO2  0.0000000E+00  5.7755591E-04
    
 LL4FV3-T-2015-08-08-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-08-000000-DMS-bb.bin
 DMS  0.0000000E+00  4.5221609E-07
    
 LL4FV3-T-2015-08-08-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   912000.0    
    
 firesize_agef  0.0000000E+00   1824000.    
    
 firesize_agsv  0.0000000E+00   2280000.    
    
 firesize_aggr  0.0000000E+00   1557700.    
    
+ /bin/rm -f Global_MCD14DL_2015220.txt 'f2015220*.filt' LL4FV3-T-2015-08-08-000000-ALD-bb.bin LL4FV3-T-2015-08-08-000000-ASH-bb.bin LL4FV3-T-2015-08-08-000000-BC-bb.bin LL4FV3-T-2015-08-08-000000-CO-bb.bin LL4FV3-T-2015-08-08-000000-CSL-bb.bin LL4FV3-T-2015-08-08-000000-DMS-bb.bin LL4FV3-T-2015-08-08-000000-ETH-bb.bin LL4FV3-T-2015-08-08-000000-HC3-bb.bin LL4FV3-T-2015-08-08-000000-HC5-bb.bin LL4FV3-T-2015-08-08-000000-HC8-bb.bin LL4FV3-T-2015-08-08-000000-HCHO-bb.bin LL4FV3-T-2015-08-08-000000-ISO-bb.bin LL4FV3-T-2015-08-08-000000-KET-bb.bin LL4FV3-T-2015-08-08-000000-lonlat-bb.bin LL4FV3-T-2015-08-08-000000-NH3-bb.bin LL4FV3-T-2015-08-08-000000-NO2-bb.bin LL4FV3-T-2015-08-08-000000-NO-bb.bin LL4FV3-T-2015-08-08-000000-OC-bb.bin LL4FV3-T-2015-08-08-000000-OLI-bb.bin LL4FV3-T-2015-08-08-000000-OLT-bb.bin LL4FV3-T-2015-08-08-000000-ORA2-bb.bin LL4FV3-T-2015-08-08-000000-plume-bb.bin LL4FV3-T-2015-08-08-000000-PM10-bb.bin LL4FV3-T-2015-08-08-000000-PM2.5-bb.bin LL4FV3-T-2015-08-08-000000-SO2-bb.bin LL4FV3-T-2015-08-08-000000-SO4-bb.bin LL4FV3-T-2015-08-08-000000-TOL-bb.bin LL4FV3-T-2015-08-08-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080800.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 08 -H 00
+ indate='2015-08-08 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-08 00:00:00 -H 00 -H +24
+ outdate='2015-08-09 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-08 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-08 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-08 00:00:00 -H 00 -H +24
+ end_day=09
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-08 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015080900
+ echo 2015080900
2015080900
+ [[ 2015080900 -le 2015090100 ]]
+ echo 2015080900
+ cut -c1-4
+ year=2015
+ echo 2015080900
+ cut -c5-6
+ month=08
+ echo 2015080900
+ cut -c7-8
+ day=09
+ echo 2015080900
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/09' +%j
+ julday=2015221
+ echo 2015221
2015221
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=09, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=09, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015080900.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015080900 emiss_bburn_fv3
 LL4FV3-T-2015-08-09-000000-BC-bb.bin
 BC  0.0000000E+00   1.158803    
    
 LL4FV3-T-2015-08-09-000000-OC-bb.bin
 OC  0.0000000E+00   14.43343    
    
 LL4FV3-T-2015-08-09-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   5.364907    
    
 LL4FV3-T-2015-08-09-000000-PM10-bb.bin
 PM10  0.0000000E+00   30.29224    
    
 LL4FV3-T-2015-08-09-000000-SO2-bb.bin
 SO2  0.0000000E+00  7.2649843E-04
    
 LL4FV3-T-2015-08-09-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-09-000000-DMS-bb.bin
 DMS  0.0000000E+00  5.2866716E-07
    
 LL4FV3-T-2015-08-09-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   893400.1    
    
 firesize_agef  0.0000000E+00   1245100.    
    
 firesize_agsv  0.0000000E+00   1140000.    
    
 firesize_aggr  0.0000000E+00   1596000.    
    
+ /bin/rm -f Global_MCD14DL_2015221.txt 'f2015221*.filt' LL4FV3-T-2015-08-09-000000-ALD-bb.bin LL4FV3-T-2015-08-09-000000-ASH-bb.bin LL4FV3-T-2015-08-09-000000-BC-bb.bin LL4FV3-T-2015-08-09-000000-CO-bb.bin LL4FV3-T-2015-08-09-000000-CSL-bb.bin LL4FV3-T-2015-08-09-000000-DMS-bb.bin LL4FV3-T-2015-08-09-000000-ETH-bb.bin LL4FV3-T-2015-08-09-000000-HC3-bb.bin LL4FV3-T-2015-08-09-000000-HC5-bb.bin LL4FV3-T-2015-08-09-000000-HC8-bb.bin LL4FV3-T-2015-08-09-000000-HCHO-bb.bin LL4FV3-T-2015-08-09-000000-ISO-bb.bin LL4FV3-T-2015-08-09-000000-KET-bb.bin LL4FV3-T-2015-08-09-000000-lonlat-bb.bin LL4FV3-T-2015-08-09-000000-NH3-bb.bin LL4FV3-T-2015-08-09-000000-NO2-bb.bin LL4FV3-T-2015-08-09-000000-NO-bb.bin LL4FV3-T-2015-08-09-000000-OC-bb.bin LL4FV3-T-2015-08-09-000000-OLI-bb.bin LL4FV3-T-2015-08-09-000000-OLT-bb.bin LL4FV3-T-2015-08-09-000000-ORA2-bb.bin LL4FV3-T-2015-08-09-000000-plume-bb.bin LL4FV3-T-2015-08-09-000000-PM10-bb.bin LL4FV3-T-2015-08-09-000000-PM2.5-bb.bin LL4FV3-T-2015-08-09-000000-SO2-bb.bin LL4FV3-T-2015-08-09-000000-SO4-bb.bin LL4FV3-T-2015-08-09-000000-TOL-bb.bin LL4FV3-T-2015-08-09-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015080900.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 09 -H 00
+ indate='2015-08-09 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-09 00:00:00 -H 00 -H +24
+ outdate='2015-08-10 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-09 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-09 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-09 00:00:00 -H 00 -H +24
+ end_day=10
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-09 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081000
+ echo 2015081000
2015081000
+ [[ 2015081000 -le 2015090100 ]]
+ echo 2015081000
+ cut -c1-4
+ year=2015
+ echo 2015081000
+ cut -c5-6
+ month=08
+ echo 2015081000
+ cut -c7-8
+ day=10
+ echo 2015081000
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/10' +%j
+ julday=2015222
+ echo 2015222
2015222
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=10, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=10, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081000.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081000 emiss_bburn_fv3
 LL4FV3-T-2015-08-10-000000-BC-bb.bin
 BC  0.0000000E+00  0.8334032    
    
 LL4FV3-T-2015-08-10-000000-OC-bb.bin
 OC  0.0000000E+00   10.37477    
    
 LL4FV3-T-2015-08-10-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   3.856413    
    
 LL4FV3-T-2015-08-10-000000-PM10-bb.bin
 PM10  0.0000000E+00   21.77809    
    
 LL4FV3-T-2015-08-10-000000-SO2-bb.bin
 SO2  0.0000000E+00  5.2222254E-04
    
 LL4FV3-T-2015-08-10-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-10-000000-DMS-bb.bin
 DMS  0.0000000E+00  5.2736010E-07
    
 LL4FV3-T-2015-08-10-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   987100.0    
    
 firesize_agef  0.0000000E+00   1245100.    
    
 firesize_agsv  0.0000000E+00   1938000.    
    
 firesize_aggr  0.0000000E+00   2144392.    
    
+ /bin/rm -f Global_MCD14DL_2015222.txt 'f2015222*.filt' LL4FV3-T-2015-08-10-000000-ALD-bb.bin LL4FV3-T-2015-08-10-000000-ASH-bb.bin LL4FV3-T-2015-08-10-000000-BC-bb.bin LL4FV3-T-2015-08-10-000000-CO-bb.bin LL4FV3-T-2015-08-10-000000-CSL-bb.bin LL4FV3-T-2015-08-10-000000-DMS-bb.bin LL4FV3-T-2015-08-10-000000-ETH-bb.bin LL4FV3-T-2015-08-10-000000-HC3-bb.bin LL4FV3-T-2015-08-10-000000-HC5-bb.bin LL4FV3-T-2015-08-10-000000-HC8-bb.bin LL4FV3-T-2015-08-10-000000-HCHO-bb.bin LL4FV3-T-2015-08-10-000000-ISO-bb.bin LL4FV3-T-2015-08-10-000000-KET-bb.bin LL4FV3-T-2015-08-10-000000-lonlat-bb.bin LL4FV3-T-2015-08-10-000000-NH3-bb.bin LL4FV3-T-2015-08-10-000000-NO2-bb.bin LL4FV3-T-2015-08-10-000000-NO-bb.bin LL4FV3-T-2015-08-10-000000-OC-bb.bin LL4FV3-T-2015-08-10-000000-OLI-bb.bin LL4FV3-T-2015-08-10-000000-OLT-bb.bin LL4FV3-T-2015-08-10-000000-ORA2-bb.bin LL4FV3-T-2015-08-10-000000-plume-bb.bin LL4FV3-T-2015-08-10-000000-PM10-bb.bin LL4FV3-T-2015-08-10-000000-PM2.5-bb.bin LL4FV3-T-2015-08-10-000000-SO2-bb.bin LL4FV3-T-2015-08-10-000000-SO4-bb.bin LL4FV3-T-2015-08-10-000000-TOL-bb.bin LL4FV3-T-2015-08-10-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081000.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 10 -H 00
+ indate='2015-08-10 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-10 00:00:00 -H 00 -H +24
+ outdate='2015-08-11 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-10 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-10 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-10 00:00:00 -H 00 -H +24
+ end_day=11
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-10 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081100
+ echo 2015081100
2015081100
+ [[ 2015081100 -le 2015090100 ]]
+ echo 2015081100
+ cut -c1-4
+ year=2015
+ echo 2015081100
+ cut -c5-6
+ month=08
+ echo 2015081100
+ cut -c7-8
+ day=11
+ echo 2015081100
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/11' +%j
+ julday=2015223
+ echo 2015223
2015223
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=11, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=11, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081100.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081100 emiss_bburn_fv3
 LL4FV3-T-2015-08-11-000000-BC-bb.bin
 BC  0.0000000E+00   1.024181    
    
 LL4FV3-T-2015-08-11-000000-OC-bb.bin
 OC  0.0000000E+00   7.998528    
    
 LL4FV3-T-2015-08-11-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   3.062350    
    
 LL4FV3-T-2015-08-11-000000-PM10-bb.bin
 PM10  0.0000000E+00   19.93798    
    
 LL4FV3-T-2015-08-11-000000-SO2-bb.bin
 SO2  0.0000000E+00  4.1392763E-04
    
 LL4FV3-T-2015-08-11-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-11-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.1262302E-06
    
 LL4FV3-T-2015-08-11-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   684000.0    
    
 firesize_agef  0.0000000E+00   951699.9    
    
 firesize_agsv  0.0000000E+00   1254000.    
    
 firesize_aggr  0.0000000E+00   2109892.    
    
+ /bin/rm -f Global_MCD14DL_2015223.txt 'f2015223*.filt' LL4FV3-T-2015-08-11-000000-ALD-bb.bin LL4FV3-T-2015-08-11-000000-ASH-bb.bin LL4FV3-T-2015-08-11-000000-BC-bb.bin LL4FV3-T-2015-08-11-000000-CO-bb.bin LL4FV3-T-2015-08-11-000000-CSL-bb.bin LL4FV3-T-2015-08-11-000000-DMS-bb.bin LL4FV3-T-2015-08-11-000000-ETH-bb.bin LL4FV3-T-2015-08-11-000000-HC3-bb.bin LL4FV3-T-2015-08-11-000000-HC5-bb.bin LL4FV3-T-2015-08-11-000000-HC8-bb.bin LL4FV3-T-2015-08-11-000000-HCHO-bb.bin LL4FV3-T-2015-08-11-000000-ISO-bb.bin LL4FV3-T-2015-08-11-000000-KET-bb.bin LL4FV3-T-2015-08-11-000000-lonlat-bb.bin LL4FV3-T-2015-08-11-000000-NH3-bb.bin LL4FV3-T-2015-08-11-000000-NO2-bb.bin LL4FV3-T-2015-08-11-000000-NO-bb.bin LL4FV3-T-2015-08-11-000000-OC-bb.bin LL4FV3-T-2015-08-11-000000-OLI-bb.bin LL4FV3-T-2015-08-11-000000-OLT-bb.bin LL4FV3-T-2015-08-11-000000-ORA2-bb.bin LL4FV3-T-2015-08-11-000000-plume-bb.bin LL4FV3-T-2015-08-11-000000-PM10-bb.bin LL4FV3-T-2015-08-11-000000-PM2.5-bb.bin LL4FV3-T-2015-08-11-000000-SO2-bb.bin LL4FV3-T-2015-08-11-000000-SO4-bb.bin LL4FV3-T-2015-08-11-000000-TOL-bb.bin LL4FV3-T-2015-08-11-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081100.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 11 -H 00
+ indate='2015-08-11 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-11 00:00:00 -H 00 -H +24
+ outdate='2015-08-12 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-11 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-11 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-11 00:00:00 -H 00 -H +24
+ end_day=12
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-11 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081200
+ echo 2015081200
2015081200
+ [[ 2015081200 -le 2015090100 ]]
+ echo 2015081200
+ cut -c1-4
+ year=2015
+ echo 2015081200
+ cut -c5-6
+ month=08
+ echo 2015081200
+ cut -c7-8
+ day=12
+ echo 2015081200
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/12' +%j
+ julday=2015224
+ echo 2015224
2015224
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=12, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=12, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081200.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081200 emiss_bburn_fv3
 LL4FV3-T-2015-08-12-000000-BC-bb.bin
 BC  0.0000000E+00   4.065889    
    
 LL4FV3-T-2015-08-12-000000-OC-bb.bin
 OC  0.0000000E+00   28.28439    
    
 LL4FV3-T-2015-08-12-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   10.96024    
    
 LL4FV3-T-2015-08-12-000000-PM10-bb.bin
 PM10  0.0000000E+00   75.13046    
    
 LL4FV3-T-2015-08-12-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.4803595E-03
    
 LL4FV3-T-2015-08-12-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-12-000000-DMS-bb.bin
 DMS  0.0000000E+00  4.5430406E-06
    
 LL4FV3-T-2015-08-12-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000004    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1140000.    
    
 firesize_agef  0.0000000E+00   1177206.    
    
 firesize_agsv  0.0000000E+00   1824000.    
    
 firesize_aggr  0.0000000E+00   3113800.    
    
+ /bin/rm -f Global_MCD14DL_2015224.txt 'f2015224*.filt' LL4FV3-T-2015-08-12-000000-ALD-bb.bin LL4FV3-T-2015-08-12-000000-ASH-bb.bin LL4FV3-T-2015-08-12-000000-BC-bb.bin LL4FV3-T-2015-08-12-000000-CO-bb.bin LL4FV3-T-2015-08-12-000000-CSL-bb.bin LL4FV3-T-2015-08-12-000000-DMS-bb.bin LL4FV3-T-2015-08-12-000000-ETH-bb.bin LL4FV3-T-2015-08-12-000000-HC3-bb.bin LL4FV3-T-2015-08-12-000000-HC5-bb.bin LL4FV3-T-2015-08-12-000000-HC8-bb.bin LL4FV3-T-2015-08-12-000000-HCHO-bb.bin LL4FV3-T-2015-08-12-000000-ISO-bb.bin LL4FV3-T-2015-08-12-000000-KET-bb.bin LL4FV3-T-2015-08-12-000000-lonlat-bb.bin LL4FV3-T-2015-08-12-000000-NH3-bb.bin LL4FV3-T-2015-08-12-000000-NO2-bb.bin LL4FV3-T-2015-08-12-000000-NO-bb.bin LL4FV3-T-2015-08-12-000000-OC-bb.bin LL4FV3-T-2015-08-12-000000-OLI-bb.bin LL4FV3-T-2015-08-12-000000-OLT-bb.bin LL4FV3-T-2015-08-12-000000-ORA2-bb.bin LL4FV3-T-2015-08-12-000000-plume-bb.bin LL4FV3-T-2015-08-12-000000-PM10-bb.bin LL4FV3-T-2015-08-12-000000-PM2.5-bb.bin LL4FV3-T-2015-08-12-000000-SO2-bb.bin LL4FV3-T-2015-08-12-000000-SO4-bb.bin LL4FV3-T-2015-08-12-000000-TOL-bb.bin LL4FV3-T-2015-08-12-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081200.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 12 -H 00
+ indate='2015-08-12 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-12 00:00:00 -H 00 -H +24
+ outdate='2015-08-13 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-12 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-12 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-12 00:00:00 -H 00 -H +24
+ end_day=13
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-12 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081300
+ echo 2015081300
2015081300
+ [[ 2015081300 -le 2015090100 ]]
+ echo 2015081300
+ cut -c1-4
+ year=2015
+ echo 2015081300
+ cut -c5-6
+ month=08
+ echo 2015081300
+ cut -c7-8
+ day=13
+ echo 2015081300
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/13' +%j
+ julday=2015225
+ echo 2015225
2015225
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=13, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=13, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081300.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081300 emiss_bburn_fv3
 LL4FV3-T-2015-08-13-000000-BC-bb.bin
 BC  0.0000000E+00   4.180906    
    
 LL4FV3-T-2015-08-13-000000-OC-bb.bin
 OC  0.0000000E+00   29.08459    
    
 LL4FV3-T-2015-08-13-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   11.27026    
    
 LL4FV3-T-2015-08-13-000000-PM10-bb.bin
 PM10  0.0000000E+00   77.25592    
    
 LL4FV3-T-2015-08-13-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.5222387E-03
    
 LL4FV3-T-2015-08-13-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-13-000000-DMS-bb.bin
 DMS  0.0000000E+00  4.6715668E-06
    
 LL4FV3-T-2015-08-13-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000000    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   963500.1    
    
 firesize_agef  0.0000000E+00   1068900.    
    
 firesize_agsv  0.0000000E+00   1529600.    
    
 firesize_aggr  0.0000000E+00   3879800.    
    
+ /bin/rm -f Global_MCD14DL_2015225.txt 'f2015225*.filt' LL4FV3-T-2015-08-13-000000-ALD-bb.bin LL4FV3-T-2015-08-13-000000-ASH-bb.bin LL4FV3-T-2015-08-13-000000-BC-bb.bin LL4FV3-T-2015-08-13-000000-CO-bb.bin LL4FV3-T-2015-08-13-000000-CSL-bb.bin LL4FV3-T-2015-08-13-000000-DMS-bb.bin LL4FV3-T-2015-08-13-000000-ETH-bb.bin LL4FV3-T-2015-08-13-000000-HC3-bb.bin LL4FV3-T-2015-08-13-000000-HC5-bb.bin LL4FV3-T-2015-08-13-000000-HC8-bb.bin LL4FV3-T-2015-08-13-000000-HCHO-bb.bin LL4FV3-T-2015-08-13-000000-ISO-bb.bin LL4FV3-T-2015-08-13-000000-KET-bb.bin LL4FV3-T-2015-08-13-000000-lonlat-bb.bin LL4FV3-T-2015-08-13-000000-NH3-bb.bin LL4FV3-T-2015-08-13-000000-NO2-bb.bin LL4FV3-T-2015-08-13-000000-NO-bb.bin LL4FV3-T-2015-08-13-000000-OC-bb.bin LL4FV3-T-2015-08-13-000000-OLI-bb.bin LL4FV3-T-2015-08-13-000000-OLT-bb.bin LL4FV3-T-2015-08-13-000000-ORA2-bb.bin LL4FV3-T-2015-08-13-000000-plume-bb.bin LL4FV3-T-2015-08-13-000000-PM10-bb.bin LL4FV3-T-2015-08-13-000000-PM2.5-bb.bin LL4FV3-T-2015-08-13-000000-SO2-bb.bin LL4FV3-T-2015-08-13-000000-SO4-bb.bin LL4FV3-T-2015-08-13-000000-TOL-bb.bin LL4FV3-T-2015-08-13-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081300.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 13 -H 00
+ indate='2015-08-13 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-13 00:00:00 -H 00 -H +24
+ outdate='2015-08-14 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-13 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-13 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-13 00:00:00 -H 00 -H +24
+ end_day=14
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-13 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081400
+ echo 2015081400
2015081400
+ [[ 2015081400 -le 2015090100 ]]
+ echo 2015081400
+ cut -c1-4
+ year=2015
+ echo 2015081400
+ cut -c5-6
+ month=08
+ echo 2015081400
+ cut -c7-8
+ day=14
+ echo 2015081400
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/14' +%j
+ julday=2015226
+ echo 2015226
2015226
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=14, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=14, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081400.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081400 emiss_bburn_fv3
 LL4FV3-T-2015-08-14-000000-BC-bb.bin
 BC  0.0000000E+00   2.490881    
    
 LL4FV3-T-2015-08-14-000000-OC-bb.bin
 OC  0.0000000E+00   18.51609    
    
 LL4FV3-T-2015-08-14-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   7.132419    
    
 LL4FV3-T-2015-08-14-000000-PM10-bb.bin
 PM10  0.0000000E+00   47.68290    
    
 LL4FV3-T-2015-08-14-000000-SO2-bb.bin
 SO2  0.0000000E+00  9.6370594E-04
    
 LL4FV3-T-2015-08-14-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-14-000000-DMS-bb.bin
 DMS  0.0000000E+00  2.6403425E-06
    
 LL4FV3-T-2015-08-14-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   1368000.    
    
 firesize_agsv  0.0000000E+00   1824000.    
    
 firesize_aggr  0.0000000E+00   2052000.    
    
+ /bin/rm -f Global_MCD14DL_2015226.txt 'f2015226*.filt' LL4FV3-T-2015-08-14-000000-ALD-bb.bin LL4FV3-T-2015-08-14-000000-ASH-bb.bin LL4FV3-T-2015-08-14-000000-BC-bb.bin LL4FV3-T-2015-08-14-000000-CO-bb.bin LL4FV3-T-2015-08-14-000000-CSL-bb.bin LL4FV3-T-2015-08-14-000000-DMS-bb.bin LL4FV3-T-2015-08-14-000000-ETH-bb.bin LL4FV3-T-2015-08-14-000000-HC3-bb.bin LL4FV3-T-2015-08-14-000000-HC5-bb.bin LL4FV3-T-2015-08-14-000000-HC8-bb.bin LL4FV3-T-2015-08-14-000000-HCHO-bb.bin LL4FV3-T-2015-08-14-000000-ISO-bb.bin LL4FV3-T-2015-08-14-000000-KET-bb.bin LL4FV3-T-2015-08-14-000000-lonlat-bb.bin LL4FV3-T-2015-08-14-000000-NH3-bb.bin LL4FV3-T-2015-08-14-000000-NO2-bb.bin LL4FV3-T-2015-08-14-000000-NO-bb.bin LL4FV3-T-2015-08-14-000000-OC-bb.bin LL4FV3-T-2015-08-14-000000-OLI-bb.bin LL4FV3-T-2015-08-14-000000-OLT-bb.bin LL4FV3-T-2015-08-14-000000-ORA2-bb.bin LL4FV3-T-2015-08-14-000000-plume-bb.bin LL4FV3-T-2015-08-14-000000-PM10-bb.bin LL4FV3-T-2015-08-14-000000-PM2.5-bb.bin LL4FV3-T-2015-08-14-000000-SO2-bb.bin LL4FV3-T-2015-08-14-000000-SO4-bb.bin LL4FV3-T-2015-08-14-000000-TOL-bb.bin LL4FV3-T-2015-08-14-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081400.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 14 -H 00
+ indate='2015-08-14 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-14 00:00:00 -H 00 -H +24
+ outdate='2015-08-15 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-14 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-14 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-14 00:00:00 -H 00 -H +24
+ end_day=15
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-14 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081500
+ echo 2015081500
2015081500
+ [[ 2015081500 -le 2015090100 ]]
+ echo 2015081500
+ cut -c1-4
+ year=2015
+ echo 2015081500
+ cut -c5-6
+ month=08
+ echo 2015081500
+ cut -c7-8
+ day=15
+ echo 2015081500
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/15' +%j
+ julday=2015227
+ echo 2015227
2015227
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=15, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=15, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081500.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081500 emiss_bburn_fv3
 LL4FV3-T-2015-08-15-000000-BC-bb.bin
 BC  0.0000000E+00   3.751352    
    
 LL4FV3-T-2015-08-15-000000-OC-bb.bin
 OC  0.0000000E+00   28.41410    
    
 LL4FV3-T-2015-08-15-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   10.92755    
    
 LL4FV3-T-2015-08-15-000000-PM10-bb.bin
 PM10  0.0000000E+00   72.54816    
    
 LL4FV3-T-2015-08-15-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.4766275E-03
    
 LL4FV3-T-2015-08-15-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-15-000000-DMS-bb.bin
 DMS  0.0000000E+00  3.9408906E-06
    
 LL4FV3-T-2015-08-15-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1824000.    
    
 firesize_agef  0.0000000E+00   1197000.    
    
 firesize_agsv  0.0000000E+00   3192000.    
    
 firesize_aggr  0.0000000E+00   1710000.    
    
+ /bin/rm -f Global_MCD14DL_2015227.txt 'f2015227*.filt' LL4FV3-T-2015-08-15-000000-ALD-bb.bin LL4FV3-T-2015-08-15-000000-ASH-bb.bin LL4FV3-T-2015-08-15-000000-BC-bb.bin LL4FV3-T-2015-08-15-000000-CO-bb.bin LL4FV3-T-2015-08-15-000000-CSL-bb.bin LL4FV3-T-2015-08-15-000000-DMS-bb.bin LL4FV3-T-2015-08-15-000000-ETH-bb.bin LL4FV3-T-2015-08-15-000000-HC3-bb.bin LL4FV3-T-2015-08-15-000000-HC5-bb.bin LL4FV3-T-2015-08-15-000000-HC8-bb.bin LL4FV3-T-2015-08-15-000000-HCHO-bb.bin LL4FV3-T-2015-08-15-000000-ISO-bb.bin LL4FV3-T-2015-08-15-000000-KET-bb.bin LL4FV3-T-2015-08-15-000000-lonlat-bb.bin LL4FV3-T-2015-08-15-000000-NH3-bb.bin LL4FV3-T-2015-08-15-000000-NO2-bb.bin LL4FV3-T-2015-08-15-000000-NO-bb.bin LL4FV3-T-2015-08-15-000000-OC-bb.bin LL4FV3-T-2015-08-15-000000-OLI-bb.bin LL4FV3-T-2015-08-15-000000-OLT-bb.bin LL4FV3-T-2015-08-15-000000-ORA2-bb.bin LL4FV3-T-2015-08-15-000000-plume-bb.bin LL4FV3-T-2015-08-15-000000-PM10-bb.bin LL4FV3-T-2015-08-15-000000-PM2.5-bb.bin LL4FV3-T-2015-08-15-000000-SO2-bb.bin LL4FV3-T-2015-08-15-000000-SO4-bb.bin LL4FV3-T-2015-08-15-000000-TOL-bb.bin LL4FV3-T-2015-08-15-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081500.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 15 -H 00
+ indate='2015-08-15 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-15 00:00:00 -H 00 -H +24
+ outdate='2015-08-16 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-15 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-15 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-15 00:00:00 -H 00 -H +24
+ end_day=16
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-15 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081600
+ echo 2015081600
2015081600
+ [[ 2015081600 -le 2015090100 ]]
+ echo 2015081600
+ cut -c1-4
+ year=2015
+ echo 2015081600
+ cut -c5-6
+ month=08
+ echo 2015081600
+ cut -c7-8
+ day=16
+ echo 2015081600
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/16' +%j
+ julday=2015228
+ echo 2015228
2015228
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=16, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=16, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081600.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081600 emiss_bburn_fv3
 LL4FV3-T-2015-08-16-000000-BC-bb.bin
 BC  0.0000000E+00   4.271863    
    
 LL4FV3-T-2015-08-16-000000-OC-bb.bin
 OC  0.0000000E+00   35.24738    
    
 LL4FV3-T-2015-08-16-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   13.46047    
    
 LL4FV3-T-2015-08-16-000000-PM10-bb.bin
 PM10  0.0000000E+00   86.64263    
    
 LL4FV3-T-2015-08-16-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.8196910E-03
    
 LL4FV3-T-2015-08-16-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-16-000000-DMS-bb.bin
 DMS  0.0000000E+00  4.1083113E-06
    
 LL4FV3-T-2015-08-16-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   979733.3    
    
 firesize_agsv  0.0000000E+00   1368000.    
    
 firesize_aggr  0.0000000E+00   1200200.    
    
+ /bin/rm -f Global_MCD14DL_2015228.txt 'f2015228*.filt' LL4FV3-T-2015-08-16-000000-ALD-bb.bin LL4FV3-T-2015-08-16-000000-ASH-bb.bin LL4FV3-T-2015-08-16-000000-BC-bb.bin LL4FV3-T-2015-08-16-000000-CO-bb.bin LL4FV3-T-2015-08-16-000000-CSL-bb.bin LL4FV3-T-2015-08-16-000000-DMS-bb.bin LL4FV3-T-2015-08-16-000000-ETH-bb.bin LL4FV3-T-2015-08-16-000000-HC3-bb.bin LL4FV3-T-2015-08-16-000000-HC5-bb.bin LL4FV3-T-2015-08-16-000000-HC8-bb.bin LL4FV3-T-2015-08-16-000000-HCHO-bb.bin LL4FV3-T-2015-08-16-000000-ISO-bb.bin LL4FV3-T-2015-08-16-000000-KET-bb.bin LL4FV3-T-2015-08-16-000000-lonlat-bb.bin LL4FV3-T-2015-08-16-000000-NH3-bb.bin LL4FV3-T-2015-08-16-000000-NO2-bb.bin LL4FV3-T-2015-08-16-000000-NO-bb.bin LL4FV3-T-2015-08-16-000000-OC-bb.bin LL4FV3-T-2015-08-16-000000-OLI-bb.bin LL4FV3-T-2015-08-16-000000-OLT-bb.bin LL4FV3-T-2015-08-16-000000-ORA2-bb.bin LL4FV3-T-2015-08-16-000000-plume-bb.bin LL4FV3-T-2015-08-16-000000-PM10-bb.bin LL4FV3-T-2015-08-16-000000-PM2.5-bb.bin LL4FV3-T-2015-08-16-000000-SO2-bb.bin LL4FV3-T-2015-08-16-000000-SO4-bb.bin LL4FV3-T-2015-08-16-000000-TOL-bb.bin LL4FV3-T-2015-08-16-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081600.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 16 -H 00
+ indate='2015-08-16 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-16 00:00:00 -H 00 -H +24
+ outdate='2015-08-17 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-16 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-16 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-16 00:00:00 -H 00 -H +24
+ end_day=17
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-16 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081700
+ echo 2015081700
2015081700
+ [[ 2015081700 -le 2015090100 ]]
+ echo 2015081700
+ cut -c1-4
+ year=2015
+ echo 2015081700
+ cut -c5-6
+ month=08
+ echo 2015081700
+ cut -c7-8
+ day=17
+ echo 2015081700
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/17' +%j
+ julday=2015229
+ echo 2015229
2015229
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=17, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=17, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081700.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081700 emiss_bburn_fv3
 LL4FV3-T-2015-08-17-000000-BC-bb.bin
 BC  0.0000000E+00   1.762693    
    
 LL4FV3-T-2015-08-17-000000-OC-bb.bin
 OC  0.0000000E+00   16.92751    
    
 LL4FV3-T-2015-08-17-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   6.392477    
    
 LL4FV3-T-2015-08-17-000000-PM10-bb.bin
 PM10  0.0000000E+00   39.07254    
    
 LL4FV3-T-2015-08-17-000000-SO2-bb.bin
 SO2  0.0000000E+00  8.6478324E-04
    
 LL4FV3-T-2015-08-17-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-17-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.4086456E-06
    
 LL4FV3-T-2015-08-17-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   1125900.    
    
 firesize_agsv  0.0000000E+00   2052000.    
    
 firesize_aggr  0.0000000E+00   1200200.    
    
+ /bin/rm -f Global_MCD14DL_2015229.txt 'f2015229*.filt' LL4FV3-T-2015-08-17-000000-ALD-bb.bin LL4FV3-T-2015-08-17-000000-ASH-bb.bin LL4FV3-T-2015-08-17-000000-BC-bb.bin LL4FV3-T-2015-08-17-000000-CO-bb.bin LL4FV3-T-2015-08-17-000000-CSL-bb.bin LL4FV3-T-2015-08-17-000000-DMS-bb.bin LL4FV3-T-2015-08-17-000000-ETH-bb.bin LL4FV3-T-2015-08-17-000000-HC3-bb.bin LL4FV3-T-2015-08-17-000000-HC5-bb.bin LL4FV3-T-2015-08-17-000000-HC8-bb.bin LL4FV3-T-2015-08-17-000000-HCHO-bb.bin LL4FV3-T-2015-08-17-000000-ISO-bb.bin LL4FV3-T-2015-08-17-000000-KET-bb.bin LL4FV3-T-2015-08-17-000000-lonlat-bb.bin LL4FV3-T-2015-08-17-000000-NH3-bb.bin LL4FV3-T-2015-08-17-000000-NO2-bb.bin LL4FV3-T-2015-08-17-000000-NO-bb.bin LL4FV3-T-2015-08-17-000000-OC-bb.bin LL4FV3-T-2015-08-17-000000-OLI-bb.bin LL4FV3-T-2015-08-17-000000-OLT-bb.bin LL4FV3-T-2015-08-17-000000-ORA2-bb.bin LL4FV3-T-2015-08-17-000000-plume-bb.bin LL4FV3-T-2015-08-17-000000-PM10-bb.bin LL4FV3-T-2015-08-17-000000-PM2.5-bb.bin LL4FV3-T-2015-08-17-000000-SO2-bb.bin LL4FV3-T-2015-08-17-000000-SO4-bb.bin LL4FV3-T-2015-08-17-000000-TOL-bb.bin LL4FV3-T-2015-08-17-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081700.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 17 -H 00
+ indate='2015-08-17 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-17 00:00:00 -H 00 -H +24
+ outdate='2015-08-18 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-17 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-17 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-17 00:00:00 -H 00 -H +24
+ end_day=18
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-17 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081800
+ echo 2015081800
2015081800
+ [[ 2015081800 -le 2015090100 ]]
+ echo 2015081800
+ cut -c1-4
+ year=2015
+ echo 2015081800
+ cut -c5-6
+ month=08
+ echo 2015081800
+ cut -c7-8
+ day=18
+ echo 2015081800
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/18' +%j
+ julday=2015230
+ echo 2015230
2015230
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=18, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=18, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081800.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081800 emiss_bburn_fv3
 LL4FV3-T-2015-08-18-000000-BC-bb.bin
 BC  0.0000000E+00   1.326736    
    
 LL4FV3-T-2015-08-18-000000-OC-bb.bin
 OC  0.0000000E+00   10.20790    
    
 LL4FV3-T-2015-08-18-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   3.920549    
    
 LL4FV3-T-2015-08-18-000000-PM10-bb.bin
 PM10  0.0000000E+00   25.87920    
    
 LL4FV3-T-2015-08-18-000000-SO2-bb.bin
 SO2  0.0000000E+00  5.2982394E-04
    
 LL4FV3-T-2015-08-18-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-18-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.3647999E-06
    
 LL4FV3-T-2015-08-18-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000000    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   2736000.    
    
 firesize_agef  0.0000000E+00   737357.1    
    
 firesize_agsv  0.0000000E+00   2964000.    
    
 firesize_aggr  0.0000000E+00   1068633.    
    
+ /bin/rm -f Global_MCD14DL_2015230.txt 'f2015230*.filt' LL4FV3-T-2015-08-18-000000-ALD-bb.bin LL4FV3-T-2015-08-18-000000-ASH-bb.bin LL4FV3-T-2015-08-18-000000-BC-bb.bin LL4FV3-T-2015-08-18-000000-CO-bb.bin LL4FV3-T-2015-08-18-000000-CSL-bb.bin LL4FV3-T-2015-08-18-000000-DMS-bb.bin LL4FV3-T-2015-08-18-000000-ETH-bb.bin LL4FV3-T-2015-08-18-000000-HC3-bb.bin LL4FV3-T-2015-08-18-000000-HC5-bb.bin LL4FV3-T-2015-08-18-000000-HC8-bb.bin LL4FV3-T-2015-08-18-000000-HCHO-bb.bin LL4FV3-T-2015-08-18-000000-ISO-bb.bin LL4FV3-T-2015-08-18-000000-KET-bb.bin LL4FV3-T-2015-08-18-000000-lonlat-bb.bin LL4FV3-T-2015-08-18-000000-NH3-bb.bin LL4FV3-T-2015-08-18-000000-NO2-bb.bin LL4FV3-T-2015-08-18-000000-NO-bb.bin LL4FV3-T-2015-08-18-000000-OC-bb.bin LL4FV3-T-2015-08-18-000000-OLI-bb.bin LL4FV3-T-2015-08-18-000000-OLT-bb.bin LL4FV3-T-2015-08-18-000000-ORA2-bb.bin LL4FV3-T-2015-08-18-000000-plume-bb.bin LL4FV3-T-2015-08-18-000000-PM10-bb.bin LL4FV3-T-2015-08-18-000000-PM2.5-bb.bin LL4FV3-T-2015-08-18-000000-SO2-bb.bin LL4FV3-T-2015-08-18-000000-SO4-bb.bin LL4FV3-T-2015-08-18-000000-TOL-bb.bin LL4FV3-T-2015-08-18-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081800.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 18 -H 00
+ indate='2015-08-18 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-18 00:00:00 -H 00 -H +24
+ outdate='2015-08-19 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-18 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-18 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-18 00:00:00 -H 00 -H +24
+ end_day=19
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-18 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015081900
+ echo 2015081900
2015081900
+ [[ 2015081900 -le 2015090100 ]]
+ echo 2015081900
+ cut -c1-4
+ year=2015
+ echo 2015081900
+ cut -c5-6
+ month=08
+ echo 2015081900
+ cut -c7-8
+ day=19
+ echo 2015081900
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/19' +%j
+ julday=2015231
+ echo 2015231
2015231
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=19, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=19, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015081900.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015081900 emiss_bburn_fv3
 LL4FV3-T-2015-08-19-000000-BC-bb.bin
 BC  0.0000000E+00   3.294001    
    
 LL4FV3-T-2015-08-19-000000-OC-bb.bin
 OC  0.0000000E+00   25.96736    
    
 LL4FV3-T-2015-08-19-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   9.953095    
    
 LL4FV3-T-2015-08-19-000000-PM10-bb.bin
 PM10  0.0000000E+00   65.12102    
    
 LL4FV3-T-2015-08-19-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.3452319E-03
    
 LL4FV3-T-2015-08-19-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-19-000000-DMS-bb.bin
 DMS  0.0000000E+00  3.3135659E-06
    
 LL4FV3-T-2015-08-19-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   2280000.    
    
 firesize_agef  0.0000000E+00   4560000.    
    
 firesize_agsv  0.0000000E+00   2736000.    
    
 firesize_aggr  0.0000000E+00   1068633.    
    
+ /bin/rm -f Global_MCD14DL_2015231.txt 'f2015231*.filt' LL4FV3-T-2015-08-19-000000-ALD-bb.bin LL4FV3-T-2015-08-19-000000-ASH-bb.bin LL4FV3-T-2015-08-19-000000-BC-bb.bin LL4FV3-T-2015-08-19-000000-CO-bb.bin LL4FV3-T-2015-08-19-000000-CSL-bb.bin LL4FV3-T-2015-08-19-000000-DMS-bb.bin LL4FV3-T-2015-08-19-000000-ETH-bb.bin LL4FV3-T-2015-08-19-000000-HC3-bb.bin LL4FV3-T-2015-08-19-000000-HC5-bb.bin LL4FV3-T-2015-08-19-000000-HC8-bb.bin LL4FV3-T-2015-08-19-000000-HCHO-bb.bin LL4FV3-T-2015-08-19-000000-ISO-bb.bin LL4FV3-T-2015-08-19-000000-KET-bb.bin LL4FV3-T-2015-08-19-000000-lonlat-bb.bin LL4FV3-T-2015-08-19-000000-NH3-bb.bin LL4FV3-T-2015-08-19-000000-NO2-bb.bin LL4FV3-T-2015-08-19-000000-NO-bb.bin LL4FV3-T-2015-08-19-000000-OC-bb.bin LL4FV3-T-2015-08-19-000000-OLI-bb.bin LL4FV3-T-2015-08-19-000000-OLT-bb.bin LL4FV3-T-2015-08-19-000000-ORA2-bb.bin LL4FV3-T-2015-08-19-000000-plume-bb.bin LL4FV3-T-2015-08-19-000000-PM10-bb.bin LL4FV3-T-2015-08-19-000000-PM2.5-bb.bin LL4FV3-T-2015-08-19-000000-SO2-bb.bin LL4FV3-T-2015-08-19-000000-SO4-bb.bin LL4FV3-T-2015-08-19-000000-TOL-bb.bin LL4FV3-T-2015-08-19-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015081900.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 19 -H 00
+ indate='2015-08-19 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-19 00:00:00 -H 00 -H +24
+ outdate='2015-08-20 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-19 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-19 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-19 00:00:00 -H 00 -H +24
+ end_day=20
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-19 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082000
+ echo 2015082000
2015082000
+ [[ 2015082000 -le 2015090100 ]]
+ echo 2015082000
+ cut -c1-4
+ year=2015
+ echo 2015082000
+ cut -c5-6
+ month=08
+ echo 2015082000
+ cut -c7-8
+ day=20
+ echo 2015082000
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/20' +%j
+ julday=2015232
+ echo 2015232
2015232
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=20, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=20, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082000.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082000 emiss_bburn_fv3
 LL4FV3-T-2015-08-20-000000-BC-bb.bin
 BC  0.0000000E+00   7.335778    
    
 LL4FV3-T-2015-08-20-000000-OC-bb.bin
 OC  0.0000000E+00   53.65482    
    
 LL4FV3-T-2015-08-20-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   20.69757    
    
 LL4FV3-T-2015-08-20-000000-PM10-bb.bin
 PM10  0.0000000E+00   139.2077    
    
 LL4FV3-T-2015-08-20-000000-SO2-bb.bin
 SO2  0.0000000E+00  2.7962930E-03
    
 LL4FV3-T-2015-08-20-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-20-000000-DMS-bb.bin
 DMS  0.0000000E+00  7.8813027E-06
    
 LL4FV3-T-2015-08-20-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   912000.0    
    
 firesize_agef  0.0000000E+00   1441900.    
    
 firesize_agsv  0.0000000E+00   1161300.    
    
 firesize_aggr  0.0000000E+00   1066300.    
    
+ /bin/rm -f Global_MCD14DL_2015232.txt 'f2015232*.filt' LL4FV3-T-2015-08-20-000000-ALD-bb.bin LL4FV3-T-2015-08-20-000000-ASH-bb.bin LL4FV3-T-2015-08-20-000000-BC-bb.bin LL4FV3-T-2015-08-20-000000-CO-bb.bin LL4FV3-T-2015-08-20-000000-CSL-bb.bin LL4FV3-T-2015-08-20-000000-DMS-bb.bin LL4FV3-T-2015-08-20-000000-ETH-bb.bin LL4FV3-T-2015-08-20-000000-HC3-bb.bin LL4FV3-T-2015-08-20-000000-HC5-bb.bin LL4FV3-T-2015-08-20-000000-HC8-bb.bin LL4FV3-T-2015-08-20-000000-HCHO-bb.bin LL4FV3-T-2015-08-20-000000-ISO-bb.bin LL4FV3-T-2015-08-20-000000-KET-bb.bin LL4FV3-T-2015-08-20-000000-lonlat-bb.bin LL4FV3-T-2015-08-20-000000-NH3-bb.bin LL4FV3-T-2015-08-20-000000-NO2-bb.bin LL4FV3-T-2015-08-20-000000-NO-bb.bin LL4FV3-T-2015-08-20-000000-OC-bb.bin LL4FV3-T-2015-08-20-000000-OLI-bb.bin LL4FV3-T-2015-08-20-000000-OLT-bb.bin LL4FV3-T-2015-08-20-000000-ORA2-bb.bin LL4FV3-T-2015-08-20-000000-plume-bb.bin LL4FV3-T-2015-08-20-000000-PM10-bb.bin LL4FV3-T-2015-08-20-000000-PM2.5-bb.bin LL4FV3-T-2015-08-20-000000-SO2-bb.bin LL4FV3-T-2015-08-20-000000-SO4-bb.bin LL4FV3-T-2015-08-20-000000-TOL-bb.bin LL4FV3-T-2015-08-20-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082000.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 20 -H 00
+ indate='2015-08-20 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-20 00:00:00 -H 00 -H +24
+ outdate='2015-08-21 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-20 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-20 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-20 00:00:00 -H 00 -H +24
+ end_day=21
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-20 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082100
+ echo 2015082100
2015082100
+ [[ 2015082100 -le 2015090100 ]]
+ echo 2015082100
+ cut -c1-4
+ year=2015
+ echo 2015082100
+ cut -c5-6
+ month=08
+ echo 2015082100
+ cut -c7-8
+ day=21
+ echo 2015082100
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/21' +%j
+ julday=2015233
+ echo 2015233
2015233
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=21, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=21, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082100.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082100 emiss_bburn_fv3
 LL4FV3-T-2015-08-21-000000-BC-bb.bin
 BC  0.0000000E+00   5.659212    
    
 LL4FV3-T-2015-08-21-000000-OC-bb.bin
 OC  0.0000000E+00   40.95951    
    
 LL4FV3-T-2015-08-21-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   15.81494    
    
 LL4FV3-T-2015-08-21-000000-PM10-bb.bin
 PM10  0.0000000E+00   106.7897    
    
 LL4FV3-T-2015-08-21-000000-SO2-bb.bin
 SO2  0.0000000E+00  2.1365301E-03
    
 LL4FV3-T-2015-08-21-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-21-000000-DMS-bb.bin
 DMS  0.0000000E+00  6.1320820E-06
    
 LL4FV3-T-2015-08-21-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   1164400.    
    
 firesize_agsv  0.0000000E+00   3648000.    
    
 firesize_aggr  0.0000000E+00   1066300.    
    
+ /bin/rm -f Global_MCD14DL_2015233.txt 'f2015233*.filt' LL4FV3-T-2015-08-21-000000-ALD-bb.bin LL4FV3-T-2015-08-21-000000-ASH-bb.bin LL4FV3-T-2015-08-21-000000-BC-bb.bin LL4FV3-T-2015-08-21-000000-CO-bb.bin LL4FV3-T-2015-08-21-000000-CSL-bb.bin LL4FV3-T-2015-08-21-000000-DMS-bb.bin LL4FV3-T-2015-08-21-000000-ETH-bb.bin LL4FV3-T-2015-08-21-000000-HC3-bb.bin LL4FV3-T-2015-08-21-000000-HC5-bb.bin LL4FV3-T-2015-08-21-000000-HC8-bb.bin LL4FV3-T-2015-08-21-000000-HCHO-bb.bin LL4FV3-T-2015-08-21-000000-ISO-bb.bin LL4FV3-T-2015-08-21-000000-KET-bb.bin LL4FV3-T-2015-08-21-000000-lonlat-bb.bin LL4FV3-T-2015-08-21-000000-NH3-bb.bin LL4FV3-T-2015-08-21-000000-NO2-bb.bin LL4FV3-T-2015-08-21-000000-NO-bb.bin LL4FV3-T-2015-08-21-000000-OC-bb.bin LL4FV3-T-2015-08-21-000000-OLI-bb.bin LL4FV3-T-2015-08-21-000000-OLT-bb.bin LL4FV3-T-2015-08-21-000000-ORA2-bb.bin LL4FV3-T-2015-08-21-000000-plume-bb.bin LL4FV3-T-2015-08-21-000000-PM10-bb.bin LL4FV3-T-2015-08-21-000000-PM2.5-bb.bin LL4FV3-T-2015-08-21-000000-SO2-bb.bin LL4FV3-T-2015-08-21-000000-SO4-bb.bin LL4FV3-T-2015-08-21-000000-TOL-bb.bin LL4FV3-T-2015-08-21-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082100.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 21 -H 00
+ indate='2015-08-21 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-21 00:00:00 -H 00 -H +24
+ outdate='2015-08-22 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-21 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-21 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-21 00:00:00 -H 00 -H +24
+ end_day=22
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-21 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082200
+ echo 2015082200
2015082200
+ [[ 2015082200 -le 2015090100 ]]
+ echo 2015082200
+ cut -c1-4
+ year=2015
+ echo 2015082200
+ cut -c5-6
+ month=08
+ echo 2015082200
+ cut -c7-8
+ day=22
+ echo 2015082200
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/22' +%j
+ julday=2015234
+ echo 2015234
2015234
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=22, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=22, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082200.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082200 emiss_bburn_fv3
 LL4FV3-T-2015-08-22-000000-BC-bb.bin
 BC  0.0000000E+00   1.552032    
    
 LL4FV3-T-2015-08-22-000000-OC-bb.bin
 OC  0.0000000E+00   19.43539    
    
 LL4FV3-T-2015-08-22-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   7.222068    
    
 LL4FV3-T-2015-08-22-000000-PM10-bb.bin
 PM10  0.0000000E+00   40.71668    
    
 LL4FV3-T-2015-08-22-000000-SO2-bb.bin
 SO2  0.0000000E+00  9.7800535E-04
    
 LL4FV3-T-2015-08-22-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-22-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.4305485E-06
    
 LL4FV3-T-2015-08-22-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   886900.0    
    
 firesize_agsv  0.0000000E+00   1254000.    
    
 firesize_aggr  0.0000000E+00   894538.6    
    
+ /bin/rm -f Global_MCD14DL_2015234.txt 'f2015234*.filt' LL4FV3-T-2015-08-22-000000-ALD-bb.bin LL4FV3-T-2015-08-22-000000-ASH-bb.bin LL4FV3-T-2015-08-22-000000-BC-bb.bin LL4FV3-T-2015-08-22-000000-CO-bb.bin LL4FV3-T-2015-08-22-000000-CSL-bb.bin LL4FV3-T-2015-08-22-000000-DMS-bb.bin LL4FV3-T-2015-08-22-000000-ETH-bb.bin LL4FV3-T-2015-08-22-000000-HC3-bb.bin LL4FV3-T-2015-08-22-000000-HC5-bb.bin LL4FV3-T-2015-08-22-000000-HC8-bb.bin LL4FV3-T-2015-08-22-000000-HCHO-bb.bin LL4FV3-T-2015-08-22-000000-ISO-bb.bin LL4FV3-T-2015-08-22-000000-KET-bb.bin LL4FV3-T-2015-08-22-000000-lonlat-bb.bin LL4FV3-T-2015-08-22-000000-NH3-bb.bin LL4FV3-T-2015-08-22-000000-NO2-bb.bin LL4FV3-T-2015-08-22-000000-NO-bb.bin LL4FV3-T-2015-08-22-000000-OC-bb.bin LL4FV3-T-2015-08-22-000000-OLI-bb.bin LL4FV3-T-2015-08-22-000000-OLT-bb.bin LL4FV3-T-2015-08-22-000000-ORA2-bb.bin LL4FV3-T-2015-08-22-000000-plume-bb.bin LL4FV3-T-2015-08-22-000000-PM10-bb.bin LL4FV3-T-2015-08-22-000000-PM2.5-bb.bin LL4FV3-T-2015-08-22-000000-SO2-bb.bin LL4FV3-T-2015-08-22-000000-SO4-bb.bin LL4FV3-T-2015-08-22-000000-TOL-bb.bin LL4FV3-T-2015-08-22-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082200.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 22 -H 00
+ indate='2015-08-22 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-22 00:00:00 -H 00 -H +24
+ outdate='2015-08-23 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-22 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-22 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-22 00:00:00 -H 00 -H +24
+ end_day=23
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-22 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082300
+ echo 2015082300
2015082300
+ [[ 2015082300 -le 2015090100 ]]
+ echo 2015082300
+ cut -c1-4
+ year=2015
+ echo 2015082300
+ cut -c5-6
+ month=08
+ echo 2015082300
+ cut -c7-8
+ day=23
+ echo 2015082300
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/23' +%j
+ julday=2015235
+ echo 2015235
2015235
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=23, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=23, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082300.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082300 emiss_bburn_fv3
 LL4FV3-T-2015-08-23-000000-BC-bb.bin
 BC  0.0000000E+00  0.8699739    
    
 LL4FV3-T-2015-08-23-000000-OC-bb.bin
 OC  0.0000000E+00   12.18133    
    
 LL4FV3-T-2015-08-23-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   4.480053    
    
 LL4FV3-T-2015-08-23-000000-PM10-bb.bin
 PM10  0.0000000E+00   23.88080    
    
 LL4FV3-T-2015-08-23-000000-SO2-bb.bin
 SO2  0.0000000E+00  6.0708390E-04
    
 LL4FV3-T-2015-08-23-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-23-000000-DMS-bb.bin
 DMS  0.0000000E+00  5.9950065E-07
    
 LL4FV3-T-2015-08-23-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1824000.    
    
 firesize_agef  0.0000000E+00   850700.0    
    
 firesize_agsv  0.0000000E+00   1368000.    
    
 firesize_aggr  0.0000000E+00   1070100.    
    
+ /bin/rm -f Global_MCD14DL_2015235.txt 'f2015235*.filt' LL4FV3-T-2015-08-23-000000-ALD-bb.bin LL4FV3-T-2015-08-23-000000-ASH-bb.bin LL4FV3-T-2015-08-23-000000-BC-bb.bin LL4FV3-T-2015-08-23-000000-CO-bb.bin LL4FV3-T-2015-08-23-000000-CSL-bb.bin LL4FV3-T-2015-08-23-000000-DMS-bb.bin LL4FV3-T-2015-08-23-000000-ETH-bb.bin LL4FV3-T-2015-08-23-000000-HC3-bb.bin LL4FV3-T-2015-08-23-000000-HC5-bb.bin LL4FV3-T-2015-08-23-000000-HC8-bb.bin LL4FV3-T-2015-08-23-000000-HCHO-bb.bin LL4FV3-T-2015-08-23-000000-ISO-bb.bin LL4FV3-T-2015-08-23-000000-KET-bb.bin LL4FV3-T-2015-08-23-000000-lonlat-bb.bin LL4FV3-T-2015-08-23-000000-NH3-bb.bin LL4FV3-T-2015-08-23-000000-NO2-bb.bin LL4FV3-T-2015-08-23-000000-NO-bb.bin LL4FV3-T-2015-08-23-000000-OC-bb.bin LL4FV3-T-2015-08-23-000000-OLI-bb.bin LL4FV3-T-2015-08-23-000000-OLT-bb.bin LL4FV3-T-2015-08-23-000000-ORA2-bb.bin LL4FV3-T-2015-08-23-000000-plume-bb.bin LL4FV3-T-2015-08-23-000000-PM10-bb.bin LL4FV3-T-2015-08-23-000000-PM2.5-bb.bin LL4FV3-T-2015-08-23-000000-SO2-bb.bin LL4FV3-T-2015-08-23-000000-SO4-bb.bin LL4FV3-T-2015-08-23-000000-TOL-bb.bin LL4FV3-T-2015-08-23-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082300.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 23 -H 00
+ indate='2015-08-23 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-23 00:00:00 -H 00 -H +24
+ outdate='2015-08-24 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-23 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-23 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-23 00:00:00 -H 00 -H +24
+ end_day=24
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-23 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082400
+ echo 2015082400
2015082400
+ [[ 2015082400 -le 2015090100 ]]
+ echo 2015082400
+ cut -c1-4
+ year=2015
+ echo 2015082400
+ cut -c5-6
+ month=08
+ echo 2015082400
+ cut -c7-8
+ day=24
+ echo 2015082400
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/24' +%j
+ julday=2015236
+ echo 2015236
2015236
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=24, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=24, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082400.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082400 emiss_bburn_fv3
 LL4FV3-T-2015-08-24-000000-BC-bb.bin
 BC  0.0000000E+00  0.7291885    
    
 LL4FV3-T-2015-08-24-000000-OC-bb.bin
 OC  0.0000000E+00   9.756131    
    
 LL4FV3-T-2015-08-24-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   3.612892    
    
 LL4FV3-T-2015-08-24-000000-PM10-bb.bin
 PM10  0.0000000E+00   20.00055    
    
 LL4FV3-T-2015-08-24-000000-SO2-bb.bin
 SO2  0.0000000E+00  4.8936135E-04
    
 LL4FV3-T-2015-08-24-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-24-000000-DMS-bb.bin
 DMS  0.0000000E+00  4.9894726E-07
    
 LL4FV3-T-2015-08-24-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   912000.0    
    
 firesize_agef  0.0000000E+00   610400.0    
    
 firesize_agsv  0.0000000E+00   1710000.    
    
 firesize_aggr  0.0000000E+00   1070100.    
    
+ /bin/rm -f Global_MCD14DL_2015236.txt 'f2015236*.filt' LL4FV3-T-2015-08-24-000000-ALD-bb.bin LL4FV3-T-2015-08-24-000000-ASH-bb.bin LL4FV3-T-2015-08-24-000000-BC-bb.bin LL4FV3-T-2015-08-24-000000-CO-bb.bin LL4FV3-T-2015-08-24-000000-CSL-bb.bin LL4FV3-T-2015-08-24-000000-DMS-bb.bin LL4FV3-T-2015-08-24-000000-ETH-bb.bin LL4FV3-T-2015-08-24-000000-HC3-bb.bin LL4FV3-T-2015-08-24-000000-HC5-bb.bin LL4FV3-T-2015-08-24-000000-HC8-bb.bin LL4FV3-T-2015-08-24-000000-HCHO-bb.bin LL4FV3-T-2015-08-24-000000-ISO-bb.bin LL4FV3-T-2015-08-24-000000-KET-bb.bin LL4FV3-T-2015-08-24-000000-lonlat-bb.bin LL4FV3-T-2015-08-24-000000-NH3-bb.bin LL4FV3-T-2015-08-24-000000-NO2-bb.bin LL4FV3-T-2015-08-24-000000-NO-bb.bin LL4FV3-T-2015-08-24-000000-OC-bb.bin LL4FV3-T-2015-08-24-000000-OLI-bb.bin LL4FV3-T-2015-08-24-000000-OLT-bb.bin LL4FV3-T-2015-08-24-000000-ORA2-bb.bin LL4FV3-T-2015-08-24-000000-plume-bb.bin LL4FV3-T-2015-08-24-000000-PM10-bb.bin LL4FV3-T-2015-08-24-000000-PM2.5-bb.bin LL4FV3-T-2015-08-24-000000-SO2-bb.bin LL4FV3-T-2015-08-24-000000-SO4-bb.bin LL4FV3-T-2015-08-24-000000-TOL-bb.bin LL4FV3-T-2015-08-24-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082400.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 24 -H 00
+ indate='2015-08-24 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-24 00:00:00 -H 00 -H +24
+ outdate='2015-08-25 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-24 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-24 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-24 00:00:00 -H 00 -H +24
+ end_day=25
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-24 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082500
+ echo 2015082500
2015082500
+ [[ 2015082500 -le 2015090100 ]]
+ echo 2015082500
+ cut -c1-4
+ year=2015
+ echo 2015082500
+ cut -c5-6
+ month=08
+ echo 2015082500
+ cut -c7-8
+ day=25
+ echo 2015082500
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/25' +%j
+ julday=2015237
+ echo 2015237
2015237
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=25, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=25, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082500.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082500 emiss_bburn_fv3
 LL4FV3-T-2015-08-25-000000-BC-bb.bin
 BC  0.0000000E+00  0.5453913    
    
 LL4FV3-T-2015-08-25-000000-OC-bb.bin
 OC  0.0000000E+00   7.678336    
    
 LL4FV3-T-2015-08-25-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   2.824550    
    
 LL4FV3-T-2015-08-25-000000-PM10-bb.bin
 PM10  0.0000000E+00   15.07444    
    
 LL4FV3-T-2015-08-25-000000-SO2-bb.bin
 SO2  0.0000000E+00  3.8274445E-04
    
 LL4FV3-T-2015-08-25-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-25-000000-DMS-bb.bin
 DMS  0.0000000E+00  3.7162661E-07
    
 LL4FV3-T-2015-08-25-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   2280000.    
    
 firesize_agef  0.0000000E+00   946600.1    
    
 firesize_agsv  0.0000000E+00   2508000.    
    
 firesize_aggr  0.0000000E+00   1140000.    
    
+ /bin/rm -f Global_MCD14DL_2015237.txt 'f2015237*.filt' LL4FV3-T-2015-08-25-000000-ALD-bb.bin LL4FV3-T-2015-08-25-000000-ASH-bb.bin LL4FV3-T-2015-08-25-000000-BC-bb.bin LL4FV3-T-2015-08-25-000000-CO-bb.bin LL4FV3-T-2015-08-25-000000-CSL-bb.bin LL4FV3-T-2015-08-25-000000-DMS-bb.bin LL4FV3-T-2015-08-25-000000-ETH-bb.bin LL4FV3-T-2015-08-25-000000-HC3-bb.bin LL4FV3-T-2015-08-25-000000-HC5-bb.bin LL4FV3-T-2015-08-25-000000-HC8-bb.bin LL4FV3-T-2015-08-25-000000-HCHO-bb.bin LL4FV3-T-2015-08-25-000000-ISO-bb.bin LL4FV3-T-2015-08-25-000000-KET-bb.bin LL4FV3-T-2015-08-25-000000-lonlat-bb.bin LL4FV3-T-2015-08-25-000000-NH3-bb.bin LL4FV3-T-2015-08-25-000000-NO2-bb.bin LL4FV3-T-2015-08-25-000000-NO-bb.bin LL4FV3-T-2015-08-25-000000-OC-bb.bin LL4FV3-T-2015-08-25-000000-OLI-bb.bin LL4FV3-T-2015-08-25-000000-OLT-bb.bin LL4FV3-T-2015-08-25-000000-ORA2-bb.bin LL4FV3-T-2015-08-25-000000-plume-bb.bin LL4FV3-T-2015-08-25-000000-PM10-bb.bin LL4FV3-T-2015-08-25-000000-PM2.5-bb.bin LL4FV3-T-2015-08-25-000000-SO2-bb.bin LL4FV3-T-2015-08-25-000000-SO4-bb.bin LL4FV3-T-2015-08-25-000000-TOL-bb.bin LL4FV3-T-2015-08-25-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082500.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 25 -H 00
+ indate='2015-08-25 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-25 00:00:00 -H 00 -H +24
+ outdate='2015-08-26 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-25 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-25 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-25 00:00:00 -H 00 -H +24
+ end_day=26
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-25 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082600
+ echo 2015082600
2015082600
+ [[ 2015082600 -le 2015090100 ]]
+ echo 2015082600
+ cut -c1-4
+ year=2015
+ echo 2015082600
+ cut -c5-6
+ month=08
+ echo 2015082600
+ cut -c7-8
+ day=26
+ echo 2015082600
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/26' +%j
+ julday=2015238
+ echo 2015238
2015238
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=26, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=26, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082600.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082600 emiss_bburn_fv3
 LL4FV3-T-2015-08-26-000000-BC-bb.bin
 BC  0.0000000E+00  0.4040190    
    
 LL4FV3-T-2015-08-26-000000-OC-bb.bin
 OC  0.0000000E+00   5.493425    
    
 LL4FV3-T-2015-08-26-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   2.032688    
    
 LL4FV3-T-2015-08-26-000000-PM10-bb.bin
 PM10  0.0000000E+00   11.20409    
    
 LL4FV3-T-2015-08-26-000000-SO2-bb.bin
 SO2  0.0000000E+00  2.7533929E-04
    
 LL4FV3-T-2015-08-26-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-26-000000-DMS-bb.bin
 DMS  0.0000000E+00  2.4032406E-07
    
 LL4FV3-T-2015-08-26-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   2052000.    
    
 firesize_agef  0.0000000E+00   1596000.    
    
 firesize_agsv  0.0000000E+00   1132000.    
    
 firesize_aggr  0.0000000E+00   1368000.    
    
+ /bin/rm -f Global_MCD14DL_2015238.txt 'f2015238*.filt' LL4FV3-T-2015-08-26-000000-ALD-bb.bin LL4FV3-T-2015-08-26-000000-ASH-bb.bin LL4FV3-T-2015-08-26-000000-BC-bb.bin LL4FV3-T-2015-08-26-000000-CO-bb.bin LL4FV3-T-2015-08-26-000000-CSL-bb.bin LL4FV3-T-2015-08-26-000000-DMS-bb.bin LL4FV3-T-2015-08-26-000000-ETH-bb.bin LL4FV3-T-2015-08-26-000000-HC3-bb.bin LL4FV3-T-2015-08-26-000000-HC5-bb.bin LL4FV3-T-2015-08-26-000000-HC8-bb.bin LL4FV3-T-2015-08-26-000000-HCHO-bb.bin LL4FV3-T-2015-08-26-000000-ISO-bb.bin LL4FV3-T-2015-08-26-000000-KET-bb.bin LL4FV3-T-2015-08-26-000000-lonlat-bb.bin LL4FV3-T-2015-08-26-000000-NH3-bb.bin LL4FV3-T-2015-08-26-000000-NO2-bb.bin LL4FV3-T-2015-08-26-000000-NO-bb.bin LL4FV3-T-2015-08-26-000000-OC-bb.bin LL4FV3-T-2015-08-26-000000-OLI-bb.bin LL4FV3-T-2015-08-26-000000-OLT-bb.bin LL4FV3-T-2015-08-26-000000-ORA2-bb.bin LL4FV3-T-2015-08-26-000000-plume-bb.bin LL4FV3-T-2015-08-26-000000-PM10-bb.bin LL4FV3-T-2015-08-26-000000-PM2.5-bb.bin LL4FV3-T-2015-08-26-000000-SO2-bb.bin LL4FV3-T-2015-08-26-000000-SO4-bb.bin LL4FV3-T-2015-08-26-000000-TOL-bb.bin LL4FV3-T-2015-08-26-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082600.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 26 -H 00
+ indate='2015-08-26 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-26 00:00:00 -H 00 -H +24
+ outdate='2015-08-27 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-26 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-26 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-26 00:00:00 -H 00 -H +24
+ end_day=27
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-26 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082700
+ echo 2015082700
2015082700
+ [[ 2015082700 -le 2015090100 ]]
+ echo 2015082700
+ cut -c1-4
+ year=2015
+ echo 2015082700
+ cut -c5-6
+ month=08
+ echo 2015082700
+ cut -c7-8
+ day=27
+ echo 2015082700
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/27' +%j
+ julday=2015239
+ echo 2015239
2015239
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=27, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=27, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082700.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082700 emiss_bburn_fv3
 LL4FV3-T-2015-08-27-000000-BC-bb.bin
 BC  0.0000000E+00  0.4681866    
    
 LL4FV3-T-2015-08-27-000000-OC-bb.bin
 OC  0.0000000E+00   6.934405    
    
 LL4FV3-T-2015-08-27-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   2.545155    
    
 LL4FV3-T-2015-08-27-000000-PM10-bb.bin
 PM10  0.0000000E+00   13.41159    
    
 LL4FV3-T-2015-08-27-000000-SO2-bb.bin
 SO2  0.0000000E+00  3.4493420E-04
    
 LL4FV3-T-2015-08-27-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-27-000000-DMS-bb.bin
 DMS  0.0000000E+00  2.2134913E-07
    
 LL4FV3-T-2015-08-27-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   684000.0    
    
 firesize_agef  0.0000000E+00   865300.1    
    
 firesize_agsv  0.0000000E+00   1140000.    
    
 firesize_aggr  0.0000000E+00   1197600.    
    
+ /bin/rm -f Global_MCD14DL_2015239.txt 'f2015239*.filt' LL4FV3-T-2015-08-27-000000-ALD-bb.bin LL4FV3-T-2015-08-27-000000-ASH-bb.bin LL4FV3-T-2015-08-27-000000-BC-bb.bin LL4FV3-T-2015-08-27-000000-CO-bb.bin LL4FV3-T-2015-08-27-000000-CSL-bb.bin LL4FV3-T-2015-08-27-000000-DMS-bb.bin LL4FV3-T-2015-08-27-000000-ETH-bb.bin LL4FV3-T-2015-08-27-000000-HC3-bb.bin LL4FV3-T-2015-08-27-000000-HC5-bb.bin LL4FV3-T-2015-08-27-000000-HC8-bb.bin LL4FV3-T-2015-08-27-000000-HCHO-bb.bin LL4FV3-T-2015-08-27-000000-ISO-bb.bin LL4FV3-T-2015-08-27-000000-KET-bb.bin LL4FV3-T-2015-08-27-000000-lonlat-bb.bin LL4FV3-T-2015-08-27-000000-NH3-bb.bin LL4FV3-T-2015-08-27-000000-NO2-bb.bin LL4FV3-T-2015-08-27-000000-NO-bb.bin LL4FV3-T-2015-08-27-000000-OC-bb.bin LL4FV3-T-2015-08-27-000000-OLI-bb.bin LL4FV3-T-2015-08-27-000000-OLT-bb.bin LL4FV3-T-2015-08-27-000000-ORA2-bb.bin LL4FV3-T-2015-08-27-000000-plume-bb.bin LL4FV3-T-2015-08-27-000000-PM10-bb.bin LL4FV3-T-2015-08-27-000000-PM2.5-bb.bin LL4FV3-T-2015-08-27-000000-SO2-bb.bin LL4FV3-T-2015-08-27-000000-SO4-bb.bin LL4FV3-T-2015-08-27-000000-TOL-bb.bin LL4FV3-T-2015-08-27-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082700.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 27 -H 00
+ indate='2015-08-27 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-27 00:00:00 -H 00 -H +24
+ outdate='2015-08-28 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-27 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-27 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-27 00:00:00 -H 00 -H +24
+ end_day=28
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-27 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082800
+ echo 2015082800
2015082800
+ [[ 2015082800 -le 2015090100 ]]
+ echo 2015082800
+ cut -c1-4
+ year=2015
+ echo 2015082800
+ cut -c5-6
+ month=08
+ echo 2015082800
+ cut -c7-8
+ day=28
+ echo 2015082800
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/28' +%j
+ julday=2015240
+ echo 2015240
2015240
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=28, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=28, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082800.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082800 emiss_bburn_fv3
 LL4FV3-T-2015-08-28-000000-BC-bb.bin
 BC  0.0000000E+00  0.5807206    
    
 LL4FV3-T-2015-08-28-000000-OC-bb.bin
 OC  0.0000000E+00   7.664664    
    
 LL4FV3-T-2015-08-28-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   2.840331    
    
 LL4FV3-T-2015-08-28-000000-PM10-bb.bin
 PM10  0.0000000E+00   15.78190    
    
 LL4FV3-T-2015-08-28-000000-SO2-bb.bin
 SO2  0.0000000E+00  3.8470270E-04
    
 LL4FV3-T-2015-08-28-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-28-000000-DMS-bb.bin
 DMS  0.0000000E+00  2.1305284E-07
    
 LL4FV3-T-2015-08-28-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   606754.1    
    
 firesize_agsv  0.0000000E+00   1824000.    
    
 firesize_aggr  0.0000000E+00   1262966.    
    
+ /bin/rm -f Global_MCD14DL_2015240.txt 'f2015240*.filt' LL4FV3-T-2015-08-28-000000-ALD-bb.bin LL4FV3-T-2015-08-28-000000-ASH-bb.bin LL4FV3-T-2015-08-28-000000-BC-bb.bin LL4FV3-T-2015-08-28-000000-CO-bb.bin LL4FV3-T-2015-08-28-000000-CSL-bb.bin LL4FV3-T-2015-08-28-000000-DMS-bb.bin LL4FV3-T-2015-08-28-000000-ETH-bb.bin LL4FV3-T-2015-08-28-000000-HC3-bb.bin LL4FV3-T-2015-08-28-000000-HC5-bb.bin LL4FV3-T-2015-08-28-000000-HC8-bb.bin LL4FV3-T-2015-08-28-000000-HCHO-bb.bin LL4FV3-T-2015-08-28-000000-ISO-bb.bin LL4FV3-T-2015-08-28-000000-KET-bb.bin LL4FV3-T-2015-08-28-000000-lonlat-bb.bin LL4FV3-T-2015-08-28-000000-NH3-bb.bin LL4FV3-T-2015-08-28-000000-NO2-bb.bin LL4FV3-T-2015-08-28-000000-NO-bb.bin LL4FV3-T-2015-08-28-000000-OC-bb.bin LL4FV3-T-2015-08-28-000000-OLI-bb.bin LL4FV3-T-2015-08-28-000000-OLT-bb.bin LL4FV3-T-2015-08-28-000000-ORA2-bb.bin LL4FV3-T-2015-08-28-000000-plume-bb.bin LL4FV3-T-2015-08-28-000000-PM10-bb.bin LL4FV3-T-2015-08-28-000000-PM2.5-bb.bin LL4FV3-T-2015-08-28-000000-SO2-bb.bin LL4FV3-T-2015-08-28-000000-SO4-bb.bin LL4FV3-T-2015-08-28-000000-TOL-bb.bin LL4FV3-T-2015-08-28-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082800.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 28 -H 00
+ indate='2015-08-28 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-28 00:00:00 -H 00 -H +24
+ outdate='2015-08-29 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-28 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-28 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-28 00:00:00 -H 00 -H +24
+ end_day=29
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-28 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015082900
+ echo 2015082900
2015082900
+ [[ 2015082900 -le 2015090100 ]]
+ echo 2015082900
+ cut -c1-4
+ year=2015
+ echo 2015082900
+ cut -c5-6
+ month=08
+ echo 2015082900
+ cut -c7-8
+ day=29
+ echo 2015082900
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/29' +%j
+ julday=2015241
+ echo 2015241
2015241
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=29, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=29, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015082900.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015082900 emiss_bburn_fv3
 LL4FV3-T-2015-08-29-000000-BC-bb.bin
 BC  0.0000000E+00  0.3064708    
    
 LL4FV3-T-2015-08-29-000000-OC-bb.bin
 OC  0.0000000E+00   3.934363    
    
 LL4FV3-T-2015-08-29-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   1.444041    
    
 LL4FV3-T-2015-08-29-000000-PM10-bb.bin
 PM10  0.0000000E+00   7.609319    
    
 LL4FV3-T-2015-08-29-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.9570490E-04
    
 LL4FV3-T-2015-08-29-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-29-000000-DMS-bb.bin
 DMS  0.0000000E+00  2.1763891E-07
    
 LL4FV3-T-2015-08-29-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   1368000.    
    
 firesize_agef  0.0000000E+00   604733.1    
    
 firesize_agsv  0.0000000E+00   1020300.    
    
 firesize_aggr  0.0000000E+00   1125600.    
    
+ /bin/rm -f Global_MCD14DL_2015241.txt 'f2015241*.filt' LL4FV3-T-2015-08-29-000000-ALD-bb.bin LL4FV3-T-2015-08-29-000000-ASH-bb.bin LL4FV3-T-2015-08-29-000000-BC-bb.bin LL4FV3-T-2015-08-29-000000-CO-bb.bin LL4FV3-T-2015-08-29-000000-CSL-bb.bin LL4FV3-T-2015-08-29-000000-DMS-bb.bin LL4FV3-T-2015-08-29-000000-ETH-bb.bin LL4FV3-T-2015-08-29-000000-HC3-bb.bin LL4FV3-T-2015-08-29-000000-HC5-bb.bin LL4FV3-T-2015-08-29-000000-HC8-bb.bin LL4FV3-T-2015-08-29-000000-HCHO-bb.bin LL4FV3-T-2015-08-29-000000-ISO-bb.bin LL4FV3-T-2015-08-29-000000-KET-bb.bin LL4FV3-T-2015-08-29-000000-lonlat-bb.bin LL4FV3-T-2015-08-29-000000-NH3-bb.bin LL4FV3-T-2015-08-29-000000-NO2-bb.bin LL4FV3-T-2015-08-29-000000-NO-bb.bin LL4FV3-T-2015-08-29-000000-OC-bb.bin LL4FV3-T-2015-08-29-000000-OLI-bb.bin LL4FV3-T-2015-08-29-000000-OLT-bb.bin LL4FV3-T-2015-08-29-000000-ORA2-bb.bin LL4FV3-T-2015-08-29-000000-plume-bb.bin LL4FV3-T-2015-08-29-000000-PM10-bb.bin LL4FV3-T-2015-08-29-000000-PM2.5-bb.bin LL4FV3-T-2015-08-29-000000-SO2-bb.bin LL4FV3-T-2015-08-29-000000-SO4-bb.bin LL4FV3-T-2015-08-29-000000-TOL-bb.bin LL4FV3-T-2015-08-29-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015082900.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 29 -H 00
+ indate='2015-08-29 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-29 00:00:00 -H 00 -H +24
+ outdate='2015-08-30 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-29 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-29 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-29 00:00:00 -H 00 -H +24
+ end_day=30
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-29 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015083000
+ echo 2015083000
2015083000
+ [[ 2015083000 -le 2015090100 ]]
+ echo 2015083000
+ cut -c1-4
+ year=2015
+ echo 2015083000
+ cut -c5-6
+ month=08
+ echo 2015083000
+ cut -c7-8
+ day=30
+ echo 2015083000
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/30' +%j
+ julday=2015242
+ echo 2015242
2015242
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=30, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=30, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015083000.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015083000 emiss_bburn_fv3
 LL4FV3-T-2015-08-30-000000-BC-bb.bin
 BC  0.0000000E+00  0.3207576    
    
 LL4FV3-T-2015-08-30-000000-OC-bb.bin
 OC  0.0000000E+00   3.382406    
    
 LL4FV3-T-2015-08-30-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   1.492404    
    
 LL4FV3-T-2015-08-30-000000-PM10-bb.bin
 PM10  0.0000000E+00   6.896870    
    
 LL4FV3-T-2015-08-30-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.6952546E-04
    
 LL4FV3-T-2015-08-30-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-30-000000-DMS-bb.bin
 DMS  0.0000000E+00  2.4908155E-07
    
 LL4FV3-T-2015-08-30-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   2280000.    
    
 firesize_agef  0.0000000E+00   750300.0    
    
 firesize_agsv  0.0000000E+00   1114000.    
    
 firesize_aggr  0.0000000E+00   1239750.    
    
+ /bin/rm -f Global_MCD14DL_2015242.txt 'f2015242*.filt' LL4FV3-T-2015-08-30-000000-ALD-bb.bin LL4FV3-T-2015-08-30-000000-ASH-bb.bin LL4FV3-T-2015-08-30-000000-BC-bb.bin LL4FV3-T-2015-08-30-000000-CO-bb.bin LL4FV3-T-2015-08-30-000000-CSL-bb.bin LL4FV3-T-2015-08-30-000000-DMS-bb.bin LL4FV3-T-2015-08-30-000000-ETH-bb.bin LL4FV3-T-2015-08-30-000000-HC3-bb.bin LL4FV3-T-2015-08-30-000000-HC5-bb.bin LL4FV3-T-2015-08-30-000000-HC8-bb.bin LL4FV3-T-2015-08-30-000000-HCHO-bb.bin LL4FV3-T-2015-08-30-000000-ISO-bb.bin LL4FV3-T-2015-08-30-000000-KET-bb.bin LL4FV3-T-2015-08-30-000000-lonlat-bb.bin LL4FV3-T-2015-08-30-000000-NH3-bb.bin LL4FV3-T-2015-08-30-000000-NO2-bb.bin LL4FV3-T-2015-08-30-000000-NO-bb.bin LL4FV3-T-2015-08-30-000000-OC-bb.bin LL4FV3-T-2015-08-30-000000-OLI-bb.bin LL4FV3-T-2015-08-30-000000-OLT-bb.bin LL4FV3-T-2015-08-30-000000-ORA2-bb.bin LL4FV3-T-2015-08-30-000000-plume-bb.bin LL4FV3-T-2015-08-30-000000-PM10-bb.bin LL4FV3-T-2015-08-30-000000-PM2.5-bb.bin LL4FV3-T-2015-08-30-000000-SO2-bb.bin LL4FV3-T-2015-08-30-000000-SO4-bb.bin LL4FV3-T-2015-08-30-000000-TOL-bb.bin LL4FV3-T-2015-08-30-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015083000.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 30 -H 00
+ indate='2015-08-30 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-30 00:00:00 -H 00 -H +24
+ outdate='2015-08-31 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-30 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-30 00:00:00 -H 00 -H +24
+ end_month=08
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-30 00:00:00 -H 00 -H +24
+ end_day=31
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-30 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015083100
+ echo 2015083100
2015083100
+ [[ 2015083100 -le 2015090100 ]]
+ echo 2015083100
+ cut -c1-4
+ year=2015
+ echo 2015083100
+ cut -c5-6
+ month=08
+ echo 2015083100
+ cut -c7-8
+ day=31
+ echo 2015083100
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/08/31' +%j
+ julday=2015243
+ echo 2015243
2015243
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=31, \n    imon=08, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=31, 
    imon=08, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015083100.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015083100 emiss_bburn_fv3
 LL4FV3-T-2015-08-31-000000-BC-bb.bin
 BC  0.0000000E+00  0.2734200    
    
 LL4FV3-T-2015-08-31-000000-OC-bb.bin
 OC  0.0000000E+00   3.383405    
    
 LL4FV3-T-2015-08-31-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   1.328907    
    
 LL4FV3-T-2015-08-31-000000-PM10-bb.bin
 PM10  0.0000000E+00   6.916067    
    
 LL4FV3-T-2015-08-31-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.6963725E-04
    
 LL4FV3-T-2015-08-31-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-08-31-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.4770674E-07
    
 LL4FV3-T-2015-08-31-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   2508000.    
    
 firesize_agef  0.0000000E+00   893593.0    
    
 firesize_agsv  0.0000000E+00   1368000.    
    
 firesize_aggr  0.0000000E+00   1483400.    
    
+ /bin/rm -f Global_MCD14DL_2015243.txt 'f2015243*.filt' LL4FV3-T-2015-08-31-000000-ALD-bb.bin LL4FV3-T-2015-08-31-000000-ASH-bb.bin LL4FV3-T-2015-08-31-000000-BC-bb.bin LL4FV3-T-2015-08-31-000000-CO-bb.bin LL4FV3-T-2015-08-31-000000-CSL-bb.bin LL4FV3-T-2015-08-31-000000-DMS-bb.bin LL4FV3-T-2015-08-31-000000-ETH-bb.bin LL4FV3-T-2015-08-31-000000-HC3-bb.bin LL4FV3-T-2015-08-31-000000-HC5-bb.bin LL4FV3-T-2015-08-31-000000-HC8-bb.bin LL4FV3-T-2015-08-31-000000-HCHO-bb.bin LL4FV3-T-2015-08-31-000000-ISO-bb.bin LL4FV3-T-2015-08-31-000000-KET-bb.bin LL4FV3-T-2015-08-31-000000-lonlat-bb.bin LL4FV3-T-2015-08-31-000000-NH3-bb.bin LL4FV3-T-2015-08-31-000000-NO2-bb.bin LL4FV3-T-2015-08-31-000000-NO-bb.bin LL4FV3-T-2015-08-31-000000-OC-bb.bin LL4FV3-T-2015-08-31-000000-OLI-bb.bin LL4FV3-T-2015-08-31-000000-OLT-bb.bin LL4FV3-T-2015-08-31-000000-ORA2-bb.bin LL4FV3-T-2015-08-31-000000-plume-bb.bin LL4FV3-T-2015-08-31-000000-PM10-bb.bin LL4FV3-T-2015-08-31-000000-PM2.5-bb.bin LL4FV3-T-2015-08-31-000000-SO2-bb.bin LL4FV3-T-2015-08-31-000000-SO4-bb.bin LL4FV3-T-2015-08-31-000000-TOL-bb.bin LL4FV3-T-2015-08-31-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015083100.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 08 -d 31 -H 00
+ indate='2015-08-31 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-08-31 00:00:00 -H 00 -H +24
+ outdate='2015-09-01 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-08-31 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-08-31 00:00:00 -H 00 -H +24
+ end_month=09
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-08-31 00:00:00 -H 00 -H +24
+ end_day=01
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-08-31 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015090100
+ echo 2015090100
2015090100
+ [[ 2015090100 -le 2015090100 ]]
+ echo 2015090100
+ cut -c1-4
+ year=2015
+ echo 2015090100
+ cut -c5-6
+ month=09
+ echo 2015090100
+ cut -c7-8
+ day=01
+ echo 2015090100
+ cut -c9-10
+ hr=00
+ /bin/date '--date=2015/09/01' +%j
+ julday=2015244
+ echo 2015244
2015244
+ . ./prep_chem_sources.sh
+ prep_chem_sources_inp=$'\n\n  $RP_INPUT\n!##########################################################################!\n!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !\n!  version 1: 28/feb/2007                                                  !\n!  developed/coded by Saulo Freitas and Karla Longo                        !\n!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !\n!###########################################################################\n\n \n!---------------- grid_type of the grid output\n   grid_type= \'ll\',\t\n   \t\t       !\'rams\' = rams grid \n   \t\t       ! \'polar\'  = polar sterog. grid output\n                       ! \'gg\'     = gaussian grid output\n\t\t       ! \'ll\'     = lat/lon grid output\n\t\t       ! \'lambert\'  = lambert grid output\n\t\t       ! \'mercator\' = mercator grid output\n \n!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file \n!---------------- of this model\n    rams_anal_prefix = \'./ANL/barca\',\n   !rams_anal_prefix = \'/dados/dados2/mfapel/TESTCASE/ANL/A\',\n!---------------- date of emission  \n!---------------- date of emission\n!   ihour=00, iday=2, imon=10, iyear=2008,\n    ihour=00, \n    iday=01, \n    imon=09, \n    iyear=2015,\n\n!---------------- select the sources datasets to be used   \n   use_retro =0,  ! 1 = yes, 0 = not\n   retro_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro\',\n\n   use_edgar =0,  ! 0 - not,\n                  ! 1 - Version 3,\n                  ! 2 - Version 4 for some species\n                  ! 3 - Version HTAP\n\n   edgar_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP\',\n   fim_data_dir=\'.\'  ! FIM grid data in current directory\n\n   use_gocart =0,\n   gocart_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions\',\n\n   use_streets =0,\n   streets_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/STREETS\',\n\n   use_seac4rs =0,\n   seac4rs_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS\',\n\n   use_fwbawb =0,\n   fwbawb_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan\',\n\n   use_bioge =2, ! 1 - geia, 2 - megan \n   ! ###### \n   ! # BIOGENIC = 1\n   bioge_data_dir =\'/home/poluicao/EMISSION_DATA/biogenic_emissions\',\n   ! # MEGAN = 2\n   ! ######   \n    bioge_data_dir=\'/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000\',   \n   ! ######\n\n   use_gfedv2 =0,\n   gfedv2_data_dir =\'/home/poluicao/EMISSION_DATA/GFEDv2-8days\',\n\n   use_bbem =1,\n   use_bbem_plumerise =1,\n!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  \n   merge_GFEDv2_bbem =0,\n!---------------- Fire product for BBBEM/BBBEM-plumerise emission models\n!   bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f\',\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f\',\n  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"\n!  bbem_wfabba_data_dir   =\'/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_\',\n!   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_\',\n   bbem_modis_data_dir    =\'/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.\',\n   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",\n   bbem_inpe_data_dir     =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos\',\n   bbem_extra_data_dir    =\'/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat\',\n\n!---------------- veg type data set (dir + prefix)\n! veg_type_data_dir      =\'/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP\',\t       \n  veg_type_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS\',\t       \n  \n!---------------- vcf type data set (dir + prefix)\n  use_vcf = 0,\n  vcf_type_data_dir      =\'/dados/dados3/stockler/VCF/data_out/2004/VCF\',\t       \n       \n\n!----------------  New Olson\'\'s data set (dir + prefix)\n!  olson_data_dir= \'/home/poluicao/EMISSION_DATA/OLSON2/OLSON\',   \n  olson_data_dir= \'/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON\',   \n     \n!---------------- carbon density data set for Amazon (dir + prefix)\n  carbon_density_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE\',\n \n  fuel_data_dir      =\'/scratch3/BMC/wrf-chem/Emission_data/Carbon_density\',\t\t     \n \n!---------------- gocart background\n  use_gocart_bg =0,\n  gocart_bg_data_dir=\'/scratch3/BMC/wrf-chem/Emission_data/GOCART\',\n\n!---------------- volcanoes emissions\n   use_volcanoes =0,\n   volcano_index =1143, !Popocatepetl\n\n   use_these_values=\'NONE\',\n! define a text file for using external values for INJ_HEIGHT, DURATION,\n! MASS ASH (units are meters - seconds - kilograms) and the format for\n! a file \'values.txt\' is like this:\n! 11000. 10800. 1.5e10\n! use_these_values=\'values.txt\', \n!  begin_eruption=\'201204200000\',  !begin time UTC of eruption YYYYMMDDhhmm   \n   begin_eruption=\'201407281200\',  !begin time UTC of eruption YYYYMMDDhhmm   \n\n!---------------- degassing volcanoes emissions\n   use_degass_volcanoes =0,\n   degass_volc_data_dir =\'/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2\', \n\n!---------------- user specific  emissions directory\n!---------------- Update for South America megacities\n!---------------- set \'NONE\' if you do not want to use\n!  user_data_dir=\'/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities\',\n   user_data_dir=\'NONE\',\n\n\n!--------------------------------------------------------------------------------------------------\n   pond=1,   ! mad/mfa  0 -> molar mass weighted \n             !          1 -> Reactivity weighted   \n\n!---------------- for grid type \'ll\' or \'gg\' only\n   grid_resolucao_lon=0.5,\n   grid_resolucao_lat=0.5,\n\n   nlat=320,          ! if gg (only global grid)\n   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file\n   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file\n   delta_lon = 360., ! total long extension of the domain (360 for global)\n   delta_lat = 179., ! total lat  extension of the domain (180 for global)\n\n!---------------- For regional grids (polar or lambert)\n\n   NGRIDS   = 1,            ! Number of grids to run\n\n   NNXP     = 649,201,86,46,        ! Number of x gridpoints\n   NNYP     = 648,311,74,46,        ! Number of y gridpoints\n   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid\n   DELTAX   = 13545.087\n   DELTAY   = 13545.087       ! X and Y grid spacing\n\n   ! Nest ratios between this grid and the next coarser grid.\n   NSTRATX  = 1,5,3,4,           ! x-direction\n   NSTRATY  = 1,5,3,4,           ! y-direction\n\n   NINEST = 1,10,0,0,        ! Grid point on the next coarser\n   NJNEST = 1,10,0,0,        !  nest where the lower southwest\n                             !  corner of this nest will start.\n                             !  If NINEST or NJNEST = 0, use CENTLAT/LON\n   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point\n   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat\n                             ! /ref_lon from namelist.wps)\n\n   STDLAT1  = 45.,           ! If polar, unused\n   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection \n                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)\n                             ! If mercator STDLAT1 = 1st true latitude \n\n   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)\n   CENTLON  = -99.18, -46.,-80.5, -80.5,\n\n!---------------- model output domain for each grid (only set up for rams)\n   lati =  -90.,  -90.,   -90., \n   latf =  +90.,  +90.,   +90.,  \n   loni = -180., -180.,  -180., \n   lonf =  180.,  180.,   180., \n\n!---------------- project rams grid (polar sterogr) to lat/lon: \'YES\' or \'NOT\'\n   proj_to_ll=\'NO\', \n   \n!---------------- output file prefix (may include directory other than the current)\n   chem_out_prefix = "LL4FV3",\n   chem_out_format = \'vfm\',\n!---------------- convert to WRF/CHEM (yes,not)\n  special_output_to_wrf = \'no\',\n   \n  $END\n\n'
+ export prep_chem_sources_inp
+ cat
+ 0<< \EOF


  $RP_INPUT
!##########################################################################!
!  CATT-BRAMS/MCGA-CPTEC emission model    CPTEC/INPE                      !
!  version 1: 28/feb/2007                                                  !
!  developed/coded by Saulo Freitas and Karla Longo                        !
!  contact: sfreitas@cptec.inpe.br   - www.cptec.inpe.br/meio_ambiente     !
!###########################################################################

 
!---------------- grid_type of the grid output
   grid_type= 'll',	
   		       !'rams' = rams grid 
   		       ! 'polar'  = polar sterog. grid output
                       ! 'gg'     = gaussian grid output
		       ! 'll'     = lat/lon grid output
		       ! 'lambert'  = lambert grid output
		       ! 'mercator' = mercator grid output
 
!---------------- if the output data is for use in CATT-BRAMS model, provide at least one analysis file 
!---------------- of this model
    rams_anal_prefix = './ANL/barca',
   !rams_anal_prefix = '/dados/dados2/mfapel/TESTCASE/ANL/A',
!---------------- date of emission  
!---------------- date of emission
!   ihour=00, iday=2, imon=10, iyear=2008,
    ihour=00, 
    iday=01, 
    imon=09, 
    iyear=2015,

!---------------- select the sources datasets to be used   
   use_retro =0,  ! 1 = yes, 0 = not
   retro_data_dir='/scratch3/BMC/wrf-chem/Emission_data/RETRO/anthro',

   use_edgar =0,  ! 0 - not,
                  ! 1 - Version 3,
                  ! 2 - Version 4 for some species
                  ! 3 - Version HTAP

   edgar_data_dir='/scratch4/BMC/fim/fimdata_chem/EDGAR-HTAP',
   fim_data_dir='.'  ! FIM grid data in current directory

   use_gocart =0,
   gocart_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART/emissions',

   use_streets =0,
   streets_data_dir='/scratch3/BMC/wrf-chem/Emission_data/STREETS',

   use_seac4rs =0,
   seac4rs_data_dir='/scratch3/BMC/wrf-chem/Emission_data/SEAC4RS',

   use_fwbawb =0,
   fwbawb_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/Emissions_Yevich_Logan',

   use_bioge =2, ! 1 - geia, 2 - megan 
   ! ###### 
   ! # BIOGENIC = 1
   bioge_data_dir ='/home/poluicao/EMISSION_DATA/biogenic_emissions',
   ! # MEGAN = 2
   ! ######   
    bioge_data_dir='/scratch4/BMC/fim/fimdata_chem/EMISSION_DATA/MEGAN/2000',   
   ! ######

   use_gfedv2 =0,
   gfedv2_data_dir ='/home/poluicao/EMISSION_DATA/GFEDv2-8days',

   use_bbem =1,
   use_bbem_plumerise =1,
!---------------- if  the merging of gfedv2 with bbem is desired (=1, yes, 0 = no)  
   merge_GFEDv2_bbem =0,
!---------------- Fire product for BBBEM/BBBEM-plumerise emission models
!   bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes13/wf_abba/f',
!  bbem_wfabba_data_dir   ='/scratch4/BMC/public/data/sat/ssec/goes-west/wf_abba/f',
  bbem_wfabba_data_dir   ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/WFABBA-WEST/f"
!  bbem_wfabba_data_dir   ='/scratch4/BMC/fim/lzhang/Fires/goes-west/wf_abba/f',
!   bbem_modis_data_dir    ='/scratch4/BMC/public/data/sat/firms/global/Global_MCD14DL_',
!   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/Global_MCD14DL_',
   bbem_modis_data_dir    ='/scratch4/BMC/fim/lzhang/Fires/Global/2010/Fir!es.',
   bbem_modis_data_dir    ="/scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/MODIS/Global_MCD14DL_",
   bbem_inpe_data_dir     ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/DSA/Focos',
   bbem_extra_data_dir    ='/scratch3/BMC/wrf-chem/Emission_data/fires_data/BLMALASKA/current.dat',

!---------------- veg type data set (dir + prefix)
! veg_type_data_dir      ='/home/poluicao/SURFACE_DATA/GL_IGBP_AVHRR_INPE/IGBP',	       
  veg_type_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_IGBP_MODIS_INPE/MODIS',	       
  
!---------------- vcf type data set (dir + prefix)
  use_vcf = 0,
  vcf_type_data_dir      ='/dados/dados3/stockler/VCF/data_out/2004/VCF',	       
       

!----------------  New Olson''s data set (dir + prefix)
!  olson_data_dir= '/home/poluicao/EMISSION_DATA/OLSON2/OLSON',   
  olson_data_dir= '/scratch3/BMC/wrf-chem/Emission_data/OLSON2/OLSON',   
     
!---------------- carbon density data set for Amazon (dir + prefix)
  carbon_density_data_dir='/scratch3/BMC/wrf-chem/Emission_data/surface_data/GL_OGE_INPE/OGE',
 
  fuel_data_dir      ='/scratch3/BMC/wrf-chem/Emission_data/Carbon_density',		     
 
!---------------- gocart background
  use_gocart_bg =0,
  gocart_bg_data_dir='/scratch3/BMC/wrf-chem/Emission_data/GOCART',

!---------------- volcanoes emissions
   use_volcanoes =0,
   volcano_index =1143, !Popocatepetl

   use_these_values='NONE',
! define a text file for using external values for INJ_HEIGHT, DURATION,
! MASS ASH (units are meters - seconds - kilograms) and the format for
! a file 'values.txt' is like this:
! 11000. 10800. 1.5e10
! use_these_values='values.txt', 
!  begin_eruption='201204200000',  !begin time UTC of eruption YYYYMMDDhhmm   
   begin_eruption='201407281200',  !begin time UTC of eruption YYYYMMDDhhmm   

!---------------- degassing volcanoes emissions
   use_degass_volcanoes =0,
   degass_volc_data_dir ='/scratch3/BMC/wrf-chem/Emission_data/VOLC_SO2', 

!---------------- user specific  emissions directory
!---------------- Update for South America megacities
!---------------- set 'NONE' if you do not want to use
!  user_data_dir='/home/poluicao/EMISSION_DATA/SouthAmerica_Megacities',
   user_data_dir='NONE',


!--------------------------------------------------------------------------------------------------
   pond=1,   ! mad/mfa  0 -> molar mass weighted 
             !          1 -> Reactivity weighted   

!---------------- for grid type 'll' or 'gg' only
   grid_resolucao_lon=0.5,
   grid_resolucao_lat=0.5,

   nlat=320,          ! if gg (only global grid)
   lon_beg   = -180., ! (-180.:+180.) long-begin of the output file
   lat_beg   = -89.5, ! ( -90.:+90. ) lat -begin of the output file
   delta_lon = 360., ! total long extension of the domain (360 for global)
   delta_lat = 179., ! total lat  extension of the domain (180 for global)

!---------------- For regional grids (polar or lambert)

   NGRIDS   = 1,            ! Number of grids to run

   NNXP     = 649,201,86,46,        ! Number of x gridpoints
   NNYP     = 648,311,74,46,        ! Number of y gridpoints
   NXTNEST  = 0,1,2,3,          ! Grid number which is the next coarser grid
   DELTAX   = 13545.087
   DELTAY   = 13545.087       ! X and Y grid spacing

   ! Nest ratios between this grid and the next coarser grid.
   NSTRATX  = 1,5,3,4,           ! x-direction
   NSTRATY  = 1,5,3,4,           ! y-direction

   NINEST = 1,10,0,0,        ! Grid point on the next coarser
   NJNEST = 1,10,0,0,        !  nest where the lower southwest
                             !  corner of this nest will start.
                             !  If NINEST or NJNEST = 0, use CENTLAT/LON
   POLELAT  = 45.,           ! If polar, latitude/longitude of pole point
   POLELON  = -99.18        ! If lambert/mercator, lat/lon of grid origin (x=y=0.) (ref_lat
                             ! /ref_lon from namelist.wps)

   STDLAT1  = 45.,           ! If polar, unused
   STDLAT2  = 45.,           ! If lambert, standard latitudes of projection 
                             !(truelat2/truelat1 from namelist.wps, STDLAT1 < STDLAT2)
                             ! If mercator STDLAT1 = 1st true latitude 

   CENTLAT  = 45.,  -23., 27.5,  27.5,   ! (ref_lat/ref_lon from namelist.wps)
   CENTLON  = -99.18, -46.,-80.5, -80.5,

!---------------- model output domain for each grid (only set up for rams)
   lati =  -90.,  -90.,   -90., 
   latf =  +90.,  +90.,   +90.,  
   loni = -180., -180.,  -180., 
   lonf =  180.,  180.,   180., 

!---------------- project rams grid (polar sterogr) to lat/lon: 'YES' or 'NOT'
   proj_to_ll='NO', 
   
!---------------- output file prefix (may include directory other than the current)
   chem_out_prefix = "LL4FV3",
   chem_out_format = 'vfm',
!---------------- convert to WRF/CHEM (yes,not)
  special_output_to_wrf = 'no',
   
  $END


EOF
1> prep_chem_sources.inp
+ ./prep.x
+ 0< prep_chem_sources.inp 1> prep_2015090100.log 2>& 1
+ ./emiss_bburn_fv3.x LL4FV3 2015090100 emiss_bburn_fv3
 LL4FV3-T-2015-09-01-000000-BC-bb.bin
 BC  0.0000000E+00  0.3788661    
    
 LL4FV3-T-2015-09-01-000000-OC-bb.bin
 OC  0.0000000E+00   3.009398    
    
 LL4FV3-T-2015-09-01-000000-PM2.5-bb.bin
 PM2.5  0.0000000E+00   1.850884    
    
 LL4FV3-T-2015-09-01-000000-PM10-bb.bin
 PM10  0.0000000E+00   4.977416    
    
 LL4FV3-T-2015-09-01-000000-SO2-bb.bin
 SO2  0.0000000E+00  1.4943669E-04
    
 LL4FV3-T-2015-09-01-000000-SO4-bb.bin
 SO4  0.0000000E+00  0.0000000E+00
    
 LL4FV3-T-2015-09-01-000000-DMS-bb.bin
 DMS  0.0000000E+00  1.4868542E-07
    
 LL4FV3-T-2015-09-01-000000-plume-bb.bin
 mean_fct_agtf  0.0000000E+00  0.8181832    
    
 mean_fct_agef  0.0000000E+00  0.8181832    
    
 mean_fct_agsv  0.0000000E+00   3.000001    
    
 mean_fct_aggr  0.0000000E+00  0.0000000E+00
    
 firesize_agtf  0.0000000E+00   913500.0    
    
 firesize_agef  0.0000000E+00   1231740.    
    
 firesize_agsv  0.0000000E+00   2508000.    
    
 firesize_aggr  0.0000000E+00   1106750.    
    
+ /bin/rm -f Global_MCD14DL_2015244.txt 'f2015244*.filt' LL4FV3-T-2015-09-01-000000-ALD-bb.bin LL4FV3-T-2015-09-01-000000-ASH-bb.bin LL4FV3-T-2015-09-01-000000-BC-bb.bin LL4FV3-T-2015-09-01-000000-CO-bb.bin LL4FV3-T-2015-09-01-000000-CSL-bb.bin LL4FV3-T-2015-09-01-000000-DMS-bb.bin LL4FV3-T-2015-09-01-000000-ETH-bb.bin LL4FV3-T-2015-09-01-000000-HC3-bb.bin LL4FV3-T-2015-09-01-000000-HC5-bb.bin LL4FV3-T-2015-09-01-000000-HC8-bb.bin LL4FV3-T-2015-09-01-000000-HCHO-bb.bin LL4FV3-T-2015-09-01-000000-ISO-bb.bin LL4FV3-T-2015-09-01-000000-KET-bb.bin LL4FV3-T-2015-09-01-000000-lonlat-bb.bin LL4FV3-T-2015-09-01-000000-NH3-bb.bin LL4FV3-T-2015-09-01-000000-NO2-bb.bin LL4FV3-T-2015-09-01-000000-NO-bb.bin LL4FV3-T-2015-09-01-000000-OC-bb.bin LL4FV3-T-2015-09-01-000000-OLI-bb.bin LL4FV3-T-2015-09-01-000000-OLT-bb.bin LL4FV3-T-2015-09-01-000000-ORA2-bb.bin LL4FV3-T-2015-09-01-000000-plume-bb.bin LL4FV3-T-2015-09-01-000000-PM10-bb.bin LL4FV3-T-2015-09-01-000000-PM2.5-bb.bin LL4FV3-T-2015-09-01-000000-SO2-bb.bin LL4FV3-T-2015-09-01-000000-SO4-bb.bin LL4FV3-T-2015-09-01-000000-TOL-bb.bin LL4FV3-T-2015-09-01-000000-XYL-bb.bin
+ /bin/mv emiss_bburn_fv3_2015090100.nc /scratch3/BMC/chem-var/pagowski/tmp/fv3GFS/FIRE_DATA/FIRE_NCDF
+ increment_date 24
+ hr=00
+ [ 24 -lt 0 ]
+ sign=+
+ incr_hr=24
+ /home/Mariusz.Pagowski/util/bin/mktime -z -y 2015 -m 09 -d 01 -H 00
+ indate='2015-09-01 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -z -D 2015-09-01 00:00:00 -H 00 -H +24
+ outdate='2015-09-02 00:00:00'
+ /home/Mariusz.Pagowski/util/bin/mktime -F %Y -D 2015-09-01 00:00:00 -H 00 -H +24
+ end_year=2015
+ /home/Mariusz.Pagowski/util/bin/mktime -F %m -D 2015-09-01 00:00:00 -H 00 -H +24
+ end_month=09
+ /home/Mariusz.Pagowski/util/bin/mktime -F %d -D 2015-09-01 00:00:00 -H 00 -H +24
+ end_day=02
+ /home/Mariusz.Pagowski/util/bin/mktime -F %H -D 2015-09-01 00:00:00 -H 00 -H +24
+ end_hr=00
+ end_hour=00
+ current_date=2015090200
+ echo 2015090200
2015090200
+ [[ 2015090200 -le 2015090100 ]]
